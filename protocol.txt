https://docs.nats.io/reference/reference-protocols/nats-protocol
https://beta-docs.nats.io/ref/protocols/jetstream ???

Only PUB, MSG, HPUB, and HMSG include payloads.

Field Delimiters: 
    The fields of NATS protocol messages are delimited by 
    whitespace characters (space) or (tab). 
    Multiple whitespace characters will be treated as a single
    field delimiter.

Newlines: 
    NATS uses ␍ followed by ␊ (␍␊, 0x0D0A) to terminate protocol
    messages. This newline sequence is also used to mark the end 
    of the message payload in PUB, MSG, HPUB, and HMSG protocol messages.

Subject names: 
    Subject names, including reply subject names, are case-sensitive and 
    must be non-empty alphanumeric strings with no embedded whitespace. 
    All UTF-8 characters except spaces/tabs and separators which are . and > are allowed.
    Subject names can be optionally token-delimited using the dot character (.), e.g.:

    FOO, BAR, foo.bar, foo.BAR, FOO.BAR and FOO.BAR.BAZ are all valid subject names
    FOO. BAR, foo. .bar andfoo..bar are not valid subject names    

Subscription identifier (sid):
    A unique alphanumeric subscription ID, generated by the client

NATS Message Headers
    https://github.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-4.md

Without payloads    
    INFO        Server  Sent to client after initial TCP/IP connection

                        INFO {"option_name":option_value,...}␍␊
                        
                        INFO {"server_id":"NAURQFRTEZMTT6LIZKVUP7RBHEPD36NAYYTM6DBTLN5UJ4HZOHLI5IUZ","server_name":"NAURQFRTEZMTT6LIZKVUP7RBHEPD36NAYYTM6DBTLN5UJ4HZOHLI5IUZ","version":"2.10.24","proto":1,"git_commit":"1d6f7ea","go":"go1.23.4","host":"0.0.0.0","port":4222,"headers":true,"max_payload":1048576,"jetstream":true,"client_id":6,"client_ip":"172.18.0.1","xkey":"XBQCKF4GTDYB2RKF5EO4XEAW2NLCDYOCHPLAEFGTLTOOPYXM4TWRKU5E"} 
                        
                        INFO 
                            {
                                "server_id":"NBKGIX5B7HTLWXJLNR7QHFPXFCY3S33WJF7QIZLGB75KW2HNQFBNKE2F",
                                "server_name":"NBKGIX5B7HTLWXJLNR7QHFPXFCY3S33WJF7QIZLGB75KW2HNQFBNKE2F",
                                "version":"2.10.24",
                                "proto":1,
                                "git_commit":"1d6f7ea",
                                "go":"go1.23.4",
                                "host":"0.0.0.0",
                                "port":4222,
                                "headers":true,
                                "max_payload":1048576,
                                "jetstream":true,
                                "client_id":5,
                                "client_ip":"172.18.0.1",
                                "xkey":"XBPECVCORYF4FBGNQYMCDY6MDAARYABTXXCULAWNOMPRUNYWXFWUZKLQ"
                            }
                            ␍␊
                
    CONNECT     Client  Sent to server to specify connection information

                        CONNECT {"option_name":option_value,...}␍␊
        
                        CONNECT 
                            {
                                "verbose":false,
                                "pedantic":false,
                                "tls_required":false,
                                "name":"",
                                "lang":"go",
                                "version":"1.2.2",
                                "protocol":1
                            }
                            ␍␊
    
    SUB         Client  Subscribe to a subject (or subject wildcard)

                        SUB <subject> [queue group] <sid>␍␊
                        
                        SUB FOO 1␍␊
                        
                        SUB BAR G1 44␍␊
                
    UNSUB       Client  Unsubscribe (or auto-unsubscribe) from subject

                        UNSUB <sid> [max_msgs]␍␊
                        
                        UNSUB 1␍␊
                        
                        UNSUB 1 5␍␊
                
    PING        Both    PING keep-alive message

                        PING␍␊
                        
    PONG        Both    PONG keep-alive response

                        PONG␍␊
                        
    +OK         Server  Acknowledges well-formed protocol message in verbose mode

                        +OK␍␊
    
    -ERR        Server  Indicates a protocol error. May cause client disconnect.

                        -ERR <error message>␍␊
                
With payloads    
    PUB         Client  Publish a message to a subject, with optional reply subject

                        PUB <subject> [reply-to] <#bytes>␍␊[payload]␍␊
                        
                        PUB FOO 11␍␊Hello NATS!␍␊
                        
                        PUB FRONT.DOOR JOKE.22 11␍␊Knock Knock␍␊
                        
                        PUB NOTIFY 0␍␊␍␊
                
    HPUB        Client  Publish a message to a subject including NATS headers, with optional reply subject

                        HPUB <subject> [reply-to] <#header bytes> <#total bytes>␍␊[headers]␍␊␍␊[payload]␍␊
                        
                        HPUB FOO 22 33␍␊NATS/1.0␍␊Bar: Baz␍␊␍␊Hello NATS!␍␊
                        
                        HPUB FRONT.DOOR JOKE.22 45 56␍␊NATS/1.0␍␊BREAKFAST: donut␍␊LUNCH: burger␍␊␍␊Knock Knock␍␊
                        
                        HPUB MORNING.MENU 47 51␍␊NATS/1.0␍␊BREAKFAST: donut␍␊BREAKFAST: eggs␍␊␍␊Yum!␍␊                    

    MSG         Server  Delivers a message payload to a subscriber

                        MSG <subject> <sid> [reply-to] <#bytes>␍␊
                        [payload]␍␊
                        
                        MSG FOO.BAR 9 11␍␊
                        Hello World␍␊
                        
                        MSG FOO.BAR 9 GREETING.34 11␍␊
                        Hello World␍␊
    
    HMSG        Server  Delivers a message payload to a subscriber with NATS headers

                        HMSG <subject> <sid> [reply-to] <#header bytes> <#total bytes>␍␊
                        [headers]␍␊␍␊
                        [payload]␍␊
        
                        HMSG FOO.BAR 34 45␍␊
                        NATS/1.0␍␊
                        FoodGroup: vegetable␍␊␍␊
                        Hello World␍␊
                        
                        HMSG FOO.BAR 9 BAZ.69 34 45␍␊
                        NATS/1.0␍␊
                        FoodGroup: vegetable␍␊␍␊
                        Hello World␍␊

Connecting
    https://docs.nats.io/using-nats/developer/connecting

    Ping/Pong Protocol
        https://docs.nats.io/using-nats/developer/connecting/pingpong

    Turning Off Echo'd Messages
        https://docs.nats.io/using-nats/developer/connecting/noecho

Request-Reply
    https://docs.nats.io/nats-concepts/core-nats/reqreply

Reply for "$JS.API.INFO" request
{
  "type" : "io.nats.jetstream.api.v1.account_info_response",
  "memory" : 0,
  "storage" : 0,
  "reserved_memory" : 0,
  "reserved_storage" : 0,
  "streams" : 0,
  "consumers" : 0,
  "limits" : {
    "max_memory" : -1,
    "max_storage" : -1,
    "max_streams" : -1,
    "max_consumers" : -1,
    "max_ack_pending" : -1,
    "memory_max_stream_bytes" : -1,
    "storage_max_stream_bytes" : -1,
    "max_bytes_required" : false
  },
  "api" : {
    "total" : 0,
    "errors" : 0
  }
}                                                        

Reply for ""$JS.API.STREAM.DELETE.NONEXISTINGSTREAM" request
{"type":"io.nats.jetstream.api.v1.stream_delete_response","error":{"code":404,"err_code":10059,"description":"stream not found"}}

{
    "type":"io.nats.jetstream.api.v1.stream_delete_response",
    "error": {
        "code":404,
        "err_code":10059, ??? optional
        "description":"stream not found"
    }
}
{"type":"io.nats.jetstream.api.v1.stream_create_response","error":{"code":400,"err_code":10056,"description":"stream name in subject does not match request"}}
{"type":"io.nats.jetstream.api.v1.stream_create_response","config":{"name":"EXISTINGSTREAM","subjects":["EXISTINGSTREAM"],"retention":"limits","max_consumers":-1,"max_msgs":-1,"max_bytes":-1,"max_age":0,"max_msgs_per_subject":-1,"max_msg_size":-1,"discard":"old","storage":"file","num_replicas":1,"duplicate_window":120000000000,"compression":"none","allow_direct":false,"mirror_direct":false,"sealed":false,"deny_delete":false,"deny_purge":false,"allow_rollup_hdrs":false,"consumer_limits":{}},"created":"2025-02-02T08:40:19.933368586Z","state":{"messages":0,"bytes":0,"first_seq":0,"first_ts":"0001-01-01T00:00:00Z","last_seq":0,"last_ts":"0001-01-01T00:00:00Z","consumer_count":0},"ts":"2025-02-02T08:40:19.936023057Z","did_create":true}


Good response:
{
  "type": "io.nats.jetstream.api.v1.stream_names_response",
  "total": 1,
  "offset": 0,
  "limit": 1024,
  "streams": [
    "KV_NATS"
  ]
}

Error response:
{
  "type": "io.nats.jetstream.api.v1.consumer_info_response",
  "error": {
    "code": 404,
    "err_code": 10059,
    "description": "stream not found"
  }
}

Example of APIs
    $JS.API.STREAM.CREATE.%s
    $JS.API.STREAM.UPDATE.%s
    $JS.API.STREAM.NAMES
    $JS.API.STREAM.LIST
    $JS.API.STREAM.INFO.%s
    $JS.API.STREAM.DELETE.%s
    $JS.API.STREAM.PURGE.%s
    $JS.API.STREAM.MSG.DELETE.%s
    $JS.API.STREAM.MSG.GET.%s
    $JS.API.STREAM.SNAPSHOT.%s
    $JS.API.STREAM.RESTORE.%s
    $JS.API.STREAM.PEER.REMOVE.%s
    $JS.API.STREAM.LEADER.STEPDOWN.%s


JetStream Configuration
    https://docs.nats.io/nats-concepts/jetstream/streams

    {"name":"EXISTINGSTREAM","retention":"limits","max_consumers":-1,"max_msgs":-1,"max_bytes":-1,"max_age":0,"max_msgs_per_subject":-1,"max_msg_size":-1,"discard":"old","storage":"file","num_replicas":1,"duplicate_window":120000000000,"compression":"none","allow_direct":false,"mirror_direct":false,"sealed":false,"deny_delete":false,"deny_purge":false,"allow_rollup_hdrs":false}
    

    
NATS design
    https://gitee.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-1.md
    

INFO
====
// ServerInfoV1 identifies remote servers.
type ServerInfoV1 struct {
	Name      string    `json:"name"`
	Host      string    `json:"host"`
	ID        string    `json:"id"`
	Cluster   string    `json:"cluster,omitempty"`
	Version   string    `json:"ver"`
	Seq       uint64    `json:"seq"`
	JetStream bool      `json:"jetstream"`
	Time      time.Time `json:"time"`
}

CONNECT
=======
// ClientInfoV1 is detailed information about the client forming a connection.
type ClientInfoV1 struct {
	Start      time.Time     `json:"start,omitempty"`
	Host       string        `json:"host,omitempty"`
	ID         uint64        `json:"id,omitempty"`
	Account    string        `json:"acc"`
	User       string        `json:"user,omitempty"`
	Name       string        `json:"name,omitempty"`
	Lang       string        `json:"lang,omitempty"`
	Version    string        `json:"ver,omitempty"`
	RTT        time.Duration `json:"rtt,omitempty"`
	Server     string        `json:"server,omitempty"`
	Cluster    string        `json:"cluster,omitempty"`
	Alternates []string      `json:"alts,omitempty"`
	Stop       time.Time     `json:"stop,omitempty"`
	Jwt        string        `json:"jwt,omitempty"`
	IssuerKey  string        `json:"issuer_key,omitempty"`
	NameTag    string        `json:"name_tag,omitempty"`
	Tags       []string      `json:"tags,omitempty"`
	Kind       string        `json:"kind,omitempty"`
	ClientType string        `json:"client_type,omitempty"`
}

https://docs.nats.io/nats-concepts/jetstream/streams
https://docs.nats.io/~gitbook/image?url=https%3A%2F%2F1487470910-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LqMYcZML1bsXrN3Ezg0%252Fuploads%252Fgit-blob-dedcc17f082fa1e39497c54ed8191b6424ee7792%252Fstreams-and-consumers-75p.png%3Falt%3Dmedia&width=768&dpr=4&quality=100&sign=697e5d00&sv=2

Wildcards: 
    NATS supports the use of wildcards in subject subscriptions.

    The asterisk character (*) matches a single token at any level of the subject.

    The greater than symbol (>), also known as the full wildcard, matches one or more 
    tokens at the tail of a subject, and must be the last token. 
    The wildcarded subject foo.> will match foo.bar or foo.bar.baz.1, but not foo.

    Wildcards must be a separate token (foo.*.baz or foo.> are syntactically valid; 
    foo*.bar, f*o.b*r and foo> are not)

    For example, the wildcard subscriptions foo.*.quux and foo.> both match foo.bar.quux, 
    but only the latter matches foo.bar.baz. 
    
    With the full wildcard, it is also possible to express interest in every subject that 
    may exist in NATS: sub > 1, limited of course by authorization settings.


===================================================================

PUB <subject> [reply-to] <#bytes>␍␊[payload]␍␊

MSG <subject> <sid> [reply-to] <#bytes>␍␊
[payload]␍␊

SUB <subject> [queue group] <sid>␍␊
UNSUB <sid> [max_msgs]␍␊

------------------------------------------------------------------------------

snc := natsConn(t)
defer snc.Drain()
sjsc := jetStreamClient(t, snc)

var err error

const StreamName = "ORDERS"

// Create a stream using the server directly.
_, err = sjsc.AddStream(&nats.StreamConfig{Name: StreamName, Subjects: []string{"orders.*", "items.*"}})
if err != nil {
    t.Fatalf("stream create failed: %v", err)
}

cid:5 - Client connection created - Create stream

cid:5 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]

cid:5 - <<- [SUB _INBOX.SaQpMP6jbM0CWptwoGiVJD.*  1]
cid:5 - <<- [PUB $JS.API.STREAM.CREATE.ORDERS _INBOX.SaQpMP6jbM0CWptwoGiVJD.chlsFjHx 289]
cid:5 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDERS\",\"subjects\":[\"orders.*\",\"items.*\"],\"retention\":\"limits\",\"max_consumers\":0,\"max_msgs\":0,\"max_bytes\":0,\"discard\":\"old\",\"max_age\":0,\"max_msgs_per_subject\":0,\"storage\":\"file\",\"num_replicas\":0,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"consumer_limits\":{}}"]
cid:5 - ->> [MSG _INBOX.SaQpMP6jbM0CWptwoGiVJD.chlsFjHx 1 736]

cid:5 - <<- [UNSUB 1 ]
cid:5 - <-> [DELSUB 1]
cid:5 - Client connection closed: Client Closed


pnc := natsConn(t)
defer pnc.Drain()
pjs := jetStreamClient(t, pnc)

// Now make sure we can send to the stream from another account.
toSend := 2
for i := 0; i < toSend; i++ {
    if _, err := pjs.Publish("orders.2", []byte(fmt.Sprintf("ORDER-%d", i+1))); err != nil {
        t.Fatalf("Unexpected error publishing message %d: %v", i+1, err)
    }
}

cid:9 - Client connection created - Publish 2 messages
cid:9 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:9 - <<- [SUB _INBOX.SaQpMP6jbM0CWptwoGiVLw.*  1]
cid:9 - <<- [PUB orders.2 _INBOX.SaQpMP6jbM0CWptwoGiVLw.xQqV5ORO 7]
cid:9 - <<- MSG_PAYLOAD: ["ORDER-1"]
cid:9 - ->> [MSG _INBOX.SaQpMP6jbM0CWptwoGiVLw.xQqV5ORO 1 28]
cid:9 - <<- [PUB orders.2 _INBOX.SaQpMP6jbM0CWptwoGiVLw.PNYL8ZzG 7]
cid:9 - <<- MSG_PAYLOAD: ["ORDER-2"]
cid:9 - ->> [MSG _INBOX.SaQpMP6jbM0CWptwoGiVLw.PNYL8ZzG 1 28]

cid:9 - <<- [UNSUB 1 ]
cid:9 - <-> [DELSUB 1]

cid:9 - Client connection closed: Client Closed

cnc := natsConn(t)
defer cnc.Drain()
cjsc := jetStreamClient(t, cnc)

var deliver_subject = "DeliverSubject"

var sub *nats.Subscription

// Do push based consumer using a regular NATS subscription on the import subject.
sub, err = cjsc.SubscribeSync("orders.*", nats.AckNone(), nats.MaxDeliver(1), nats.BindStream(StreamName), nats.DeliverSubject(deliver_subject))
if err != nil {
    t.Fatalf("Unexpected error: %v", err)
}

cid:10 - Client connection created - Subscribe
cid:10 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:10 - <<- [SUB DeliverSubject  1]
cid:10 - <<- [SUB _INBOX.SaQpMP6jbM0CWptwoGiVRO.*  2]
cid:10 - <<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.TxkAk7FS.orders.* _INBOX.SaQpMP6jbM0CWptwoGiVRO.JV79QhEa 200]
cid:10 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"ORDERS\",\"config\":{\"deliver_policy\":\"all\",\"ack_policy\":\"none\",\"max_deliver\":1,\"filter_subject\":\"orders.*\",\"replay_policy\":\"instant\",\"deliver_subject\":\"DeliverSubject\",\"num_replicas\":0}}"]
[TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.TxkAk7FS  55]
cid:10 - ->> [MSG _INBOX.SaQpMP6jbM0CWptwoGiVRO.JV79QhEa 2 588]

for i := 0; i < toSend; i++ {
    var msg *nats.Msg
    msg, err := sub.NextMsg(100 * time.Millisecond)
    if err != nil {
        t.Fatalf("Unexpected error: %v", err)
    }
    _ = msg
}

cid:10 - ->> [MSG orders.2 1 $JS.ACK.ORDERS.TxkAk7FS.1.1.1.1740631994598944196.1 7]
cid:10 - ->> [MSG orders.2 1 $JS.ACK.ORDERS.TxkAk7FS.1.2.2.1740631994599265134.0 7]

cid:10 - <<- [UNSUB 1 ]
cid:10 - <-> [DELSUB 1]

cid:10 - <<- [PUB $JS.API.CONSUMER.DELETE.ORDERS.TxkAk7FS _INBOX.SaQpMP6jbM0CWptwoGiVRO.C2ZWfoWF 0]
cid:10 - <<- MSG_PAYLOAD: [""]
cid:10 - ->> [MSG _INBOX.SaQpMP6jbM0CWptwoGiVRO.C2ZWfoWF 2 75]

cid:10 - <<- [UNSUB 2 ]
cid:10 - <-> [DELSUB 2]

cid:10 - Client connection closed: Client Closed

=================================================================

cid:5 - Client connection created
cid:5 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:5 - <<- [PING]
cid:5 - ->> [PONG]
cid:5 - <<- [SUB _INBOX.RWjw2bH9r1p2u8uXbwQoBm.*  1]
cid:5 - <<- [PUB $JS.API.STREAM.CREATE.EVENTS _INBOX.RWjw2bH9r1p2u8uXbwQoBm.qm3IPwLY 289]
cid:5 - <<- MSG_PAYLOAD: ["{\"name\":\"EVENTS\",\"subjects\":[\"orders.*\",\"items.*\"],\"retention\":\"limits\",\"max_consumers\":0,\"max_msgs\":0,\"max_bytes\":0,\"discard\":\"old\",\"max_age\":0,\"max_msgs_per_subject\":0,\"storage\":\"file\",\"num_replicas\":0,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"consumer_limits\":{}}"]
cid:5 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoBm.qm3IPwLY 1 736]
cid:9 - Client connection created
cid:9 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:9 - <<- [SUB _INBOX.RWjw2bH9r1p2u8uXbwQoGN.*  1]
cid:9 - <<- [PUB orders.2 _INBOX.RWjw2bH9r1p2u8uXbwQoGN.AbpZaLY7 7]
cid:9 - <<- MSG_PAYLOAD: ["ORDER-1"]
cid:9 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoGN.AbpZaLY7 1 28]
cid:9 - <<- [PUB orders.2 _INBOX.RWjw2bH9r1p2u8uXbwQoGN.V4T0p0tW 7]
cid:9 - <<- MSG_PAYLOAD: ["ORDER-2"]
cid:9 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoGN.V4T0p0tW 1 28]
cid:9 - <<- [PUB items.3 _INBOX.RWjw2bH9r1p2u8uXbwQoGN.FvxiZ52k 6]
cid:9 - <<- MSG_PAYLOAD: ["ITEM-1"]
cid:9 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoGN.FvxiZ52k 1 28]
cid:9 - <<- [PUB items.3 _INBOX.RWjw2bH9r1p2u8uXbwQoGN.rO2niH3I 6]
cid:9 - <<- MSG_PAYLOAD: ["ITEM-2"]
cid:9 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoGN.rO2niH3I 1 28]
cid:10 - Client connection created
cid:10 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:9 - Client Ping Timer
cid:9 - ->> [PING]
cid:10 - Client Ping Timer
cid:10 - ->> [PING]
cid:5 - Client Ping Timer
cid:5 - ->> [PING]
cid:9 - <<- [PONG]
cid:10 - <<- [PONG]
cid:5 - <<- [PONG]
cid:10 - <<- [SUB DeliverOrders  1]
cid:10 - <<- [SUB _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.*  2]

sub, err = cjsc.SubscribeSync("orders.*", nats.AckNone(), nats.MaxDeliver(1), nats.DeliverSubject(deliver_subject))

cid:10 - <<- [PUB $JS.API.CONSUMER.CREATE.EVENTS.mFM8KFYQ.orders.* _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.F9D4D1BB 199]
cid:10 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"EVENTS\",\"config\":{\"deliver_policy\":\"all\",\"ack_policy\":\"none\",\"max_deliver\":1,\"filter_subject\":\"orders.*\",\"replay_policy\":\"instant\",\"deliver_subject\":\"DeliverOrders\",\"num_replicas\":0}}"]
2025-02-28T06:33:39.363414113Z [1] 2025/02/28 06:33:39.363323 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.EVENTS.mFM8KFYQ  55]
cid:10 - ->> [MSG orders.2 1 $JS.ACK.EVENTS.mFM8KFYQ.1.1.1.1740724412918304846.1 7]
cid:10 - ->> [MSG orders.2 1 $JS.ACK.EVENTS.mFM8KFYQ.1.2.2.1740724412918762759.0 7]
cid:10 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.F9D4D1BB 2 589]
cid:10 - <<- [SUB DeliverItems  3]
cid:10 - <<- [PUB $JS.API.CONSUMER.CREATE.EVENTS.a99Icv4S.items.* _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.GsNL1MrC 197]
cid:10 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"EVENTS\",\"config\":{\"deliver_policy\":\"all\",\"ack_policy\":\"none\",\"max_deliver\":1,\"filter_subject\":\"items.*\",\"replay_policy\":\"instant\",\"deliver_subject\":\"DeliverItems\",\"num_replicas\":0}}"]
2025-02-28T06:33:39.365141504Z [1] 2025/02/28 06:33:39.365077 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.EVENTS.a99Icv4S  56]
cid:10 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.GsNL1MrC 2 587]
cid:10 - ->> [MSG items.3 3 $JS.ACK.EVENTS.a99Icv4S.1.3.1.1740724412919130475.1 6]
cid:10 - ->> [MSG items.3 3 $JS.ACK.EVENTS.a99Icv4S.1.4.2.1740724412919451954.0 6]
cid:10 - <<- [UNSUB 1 ]
cid:10 - <-> [DELSUB 1]
cid:10 - <<- [UNSUB 3 ]
cid:10 - <-> [DELSUB 3]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:9 - <<- [UNSUB 1 ]
cid:9 - <-> [DELSUB 1]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:5 - <<- [UNSUB 1 ]
cid:5 - <-> [DELSUB 1]
cid:5 - <<- [PING]
cid:5 - ->> [PONG]
cid:10 - <<- [PUB $JS.API.CONSUMER.DELETE.EVENTS.mFM8KFYQ _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.cKvFPwso 0]
cid:10 - <<- MSG_PAYLOAD: [""]
2025-02-28T06:33:39.366550341Z [1] 2025/02/28 06:33:39.366407 [TRC] JETSTREAM - <-> [DELSUB 1]
2025-02-28T06:33:39.366584554Z [1] 2025/02/28 06:33:39.366419 [TRC] JETSTREAM - <-> [DELSUB 55]
2025-02-28T06:33:39.366591998Z [1] 2025/02/28 06:33:39.366432 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-02-28T06:33:39.366598440Z [1] 2025/02/28 06:33:39.366457 [DBG] JETSTREAM - JetStream connection closed: Client Closed
cid:10 - <<- [PUB $JS.API.CONSUMER.DELETE.EVENTS.a99Icv4S _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.VjaWBn6t 0]
cid:10 - <<- MSG_PAYLOAD: [""]
2025-02-28T06:33:39.367080649Z [1] 2025/02/28 06:33:39.367022 [TRC] JETSTREAM - <-> [DELSUB 1]
2025-02-28T06:33:39.367104614Z [1] 2025/02/28 06:33:39.367048 [TRC] JETSTREAM - <-> [DELSUB 56]
2025-02-28T06:33:39.367114202Z [1] 2025/02/28 06:33:39.367072 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-02-28T06:33:39.367122167Z [1] 2025/02/28 06:33:39.367082 [DBG] JETSTREAM - JetStream connection closed: Client Closed
cid:10 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.cKvFPwso 2 75]
cid:10 - ->> [MSG _INBOX.RWjw2bH9r1p2u8uXbwQoPZ.VjaWBn6t 2 75]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:10 - <<- [UNSUB 2 ]
cid:5 - <<- [PING]
cid:10 - <-> [DELSUB 2]
cid:5 - ->> [PONG]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:9 - Client connection closed: Client Closed
cid:5 - Client connection closed: Client Closed
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:10 - Client connection closed: Client Closed
=========================================================

cid:5 - Client connection created
cid:5 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:5 - <<- [PING]
cid:5 - ->> [PONG]

            SUB <subject>=SUBJ-A.*  <sid>=sid-1
cid:5 - <<- [SUB _INBOX.36RrU2QcsBPOaeR3FhO17z.*  1]

            PUB <subject>=STREAM.CREATE.EVENTS reply-to=SUBJ-A.<id-1>
cid:5 - <<- [PUB $JS.API.STREAM.CREATE.EVENTS _INBOX.36RrU2QcsBPOaeR3FhO17z.pP38HWRi 289]
cid:5 - <<- MSG_PAYLOAD: ["{\"name\":\"EVENTS\",\"subjects\":[\"orders.*\",\"items.*\"],\"retention\":\"limits\",\"max_consumers\":0,\"max_msgs\":0,\"max_bytes\":0,\"discard\":\"old\",\"max_age\":0,\"max_msgs_per_subject\":0,\"storage\":\"file\",\"num_replicas\":0,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"consumer_limits\":{}}"]

            MSG <subject>=SUBJ-A.<id-1> <sid>=sid-1
cid:5 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO17z.pP38HWRi 1 736]

cid:9 - Client connection created
cid:9 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:9 - <<- [SUB _INBOX.36RrU2QcsBPOaeR3FhO1AY.*  1]
cid:9 - <<- [PUB orders.2 _INBOX.36RrU2QcsBPOaeR3FhO1AY.hwC1xfvP 7]
cid:9 - <<- MSG_PAYLOAD: ["ORDER-1"]
cid:9 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO1AY.hwC1xfvP 1 28]
cid:9 - <<- [PUB orders.2 _INBOX.36RrU2QcsBPOaeR3FhO1AY.Mpd3zKnh 7]
cid:9 - <<- MSG_PAYLOAD: ["ORDER-2"]
cid:9 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO1AY.Mpd3zKnh 1 28]
cid:9 - <<- [PUB items.3 _INBOX.36RrU2QcsBPOaeR3FhO1AY.FujM9S1E 6]
cid:9 - <<- MSG_PAYLOAD: ["ITEM-1"]
cid:9 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO1AY.FujM9S1E 1 28]
cid:9 - <<- [PUB items.3 _INBOX.36RrU2QcsBPOaeR3FhO1AY.M5a4rxTB 6]
cid:9 - <<- MSG_PAYLOAD: ["ITEM-2"]
cid:9 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO1AY.M5a4rxTB 1 28]
cid:10 - Client connection created
cid:10 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]


suball, err = cjsc.SubscribeSync(">", nats.AckNone(), nats.MaxDeliver(1), nats.BindStream(StreamName), nats.DeliverSubject(deliver_subject))

cid:10 - <<- [SUB DeliverAll  1]
cid:10 - <<- [SUB _INBOX.36RrU2QcsBPOaeR3FhO1Fg.*  2]
cid:10 - <<- [PUB $JS.API.CONSUMER.CREATE.EVENTS.6BJg5kX0 _INBOX.36RrU2QcsBPOaeR3FhO1Fg.1B29ffM0 194]
cid:10 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"EVENTS\",\"config\":{\"deliver_policy\":\"all\",\"ack_policy\":\"none\",\"max_deliver\":1,\"filter_subject\":\"\\u003e\",\"replay_policy\":\"instant\",\"deliver_subject\":\"DeliverAll\",\"num_replicas\":0}}"]

2025-02-28T07:21:24.415255349Z [1] 2025/02/28 07:21:24.415207 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.EVENTS.6BJg5kX0  55]
cid:10 - ->> [MSG orders.2 1 $JS.ACK.EVENTS.6BJg5kX0.1.1.1.1740727284411371256.3 7]
cid:10 - ->> [MSG orders.2 1 $JS.ACK.EVENTS.6BJg5kX0.1.2.2.1740727284411902507.2 7]
cid:10 - ->> [MSG items.3 1 $JS.ACK.EVENTS.6BJg5kX0.1.3.3.1740727284412220891.1 6]
cid:10 - ->> [MSG items.3 1 $JS.ACK.EVENTS.6BJg5kX0.1.4.4.1740727284412449597.0 6]
cid:10 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO1Fg.1B29ffM0 2 584]
cid:10 - <<- [UNSUB 1 ]
cid:10 - <-> [DELSUB 1]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:9 - <<- [UNSUB 1 ]
cid:9 - <-> [DELSUB 1]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:5 - <<- [UNSUB 1 ]
cid:10 - <<- [PUB $JS.API.CONSUMER.DELETE.EVENTS.6BJg5kX0 _INBOX.36RrU2QcsBPOaeR3FhO1Fg.u5DiKHNf 0]
cid:5 - <-> [DELSUB 1]
cid:10 - <<- MSG_PAYLOAD: [""]
cid:5 - <<- [PING]
cid:5 - ->> [PONG]
2025-02-28T07:21:24.417559255Z [1] 2025/02/28 07:21:24.417525 [TRC] JETSTREAM - <-> [DELSUB 1]
2025-02-28T07:21:24.417566709Z [1] 2025/02/28 07:21:24.417535 [TRC] JETSTREAM - <-> [DELSUB 55]
2025-02-28T07:21:24.417582068Z [1] 2025/02/28 07:21:24.417544 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-02-28T07:21:24.417595373Z [1] 2025/02/28 07:21:24.417559 [DBG] JETSTREAM - JetStream connection closed: Client Closed
cid:10 - ->> [MSG _INBOX.36RrU2QcsBPOaeR3FhO1Fg.u5DiKHNf 2 75]
cid:9 - <<- [PING]
cid:9 - ->> [PONG]
cid:10 - <<- [UNSUB 2 ]
cid:10 - <-> [DELSUB 2]
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:5 - <<- [PING]
cid:5 - ->> [PONG]
cid:9 - Client connection closed: Client Closed
cid:5 - Client connection closed: Client Closed
cid:10 - <<- [PING]
cid:10 - ->> [PONG]
cid:10 - Client connection closed: Client Closed

================================================================================

cid:14 - Client connection created
cid:14 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true}]
cid:14 - <<- [SUB B162DE16-8AAD-4565-BFE1-5B13C231F903.* 1 ]
cid:14 - <<- [PUB $JS.API.INFO B162DE16-8AAD-4565-BFE1-5B13C231F903.2 0]
cid:14 - <<- MSG_PAYLOAD: [""]
cid:14 - ->> [MSG B162DE16-8AAD-4565-BFE1-5B13C231F903.2 1 384]
cid:14 - <<- [UNSUB 1]
cid:14 - <-> [DELSUB 1]
cid:14 - Client connection closed: Client Closed
cid:15 - Client connection created
cid:15 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true}]
cid:15 - <<- [SUB 33452691-9AB9-42E7-BEB5-2568F094EB2E.* 1 ]
cid:15 - <<- [PUB $JS.API.STREAM.DELETE.NONEXISTINGSTREAM 33452691-9AB9-42E7-BEB5-2568F094EB2E.2 0]
cid:15 - <<- MSG_PAYLOAD: [""]
cid:15 - ->> [MSG 33452691-9AB9-42E7-BEB5-2568F094EB2E.2 1 129]
cid:15 - <<- [UNSUB 1]
cid:15 - <-> [DELSUB 1]
cid:15 - Client connection closed: Client Closed
cid:16 - Client connection created
cid:16 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true}]
cid:16 - <<- [SUB AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.* 1 ]
cid:16 - <<- [PUB $JS.API.STREAM.DELETE.EXISTINGSTREAM AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.2 0]
cid:16 - <<- MSG_PAYLOAD: [""]
cid:16 - ->> [MSG AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.2 1 129]
cid:16 - <<- [PUB $JS.API.STREAM.CREATE.EXISTINGSTREAM AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.3 392]
cid:16 - <<- MSG_PAYLOAD: ["{\"name\":\"EXISTINGSTREAM\",\"subjects\":null,\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:16 - ->> [MSG AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.3 1 740]
cid:16 - <<- [PUB $JS.API.STREAM.DELETE.EXISTINGSTREAM AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.4 0]
cid:16 - <<- MSG_PAYLOAD: [""]
cid:16 - ->> [MSG AA8DDB7B-0B5F-4E92-9A94-DD65CDB5D6B7.4 1 73]
cid:16 - <<- [UNSUB 1]
cid:16 - <-> [DELSUB 1]
cid:16 - Client connection closed: Client Closed
==============================================================================


// Set Ping Interval to 20 seconds and Max Pings Outstanding to 5
nc, err := nats.Connect("demo.nats.io", nats.Name("API Ping Example"), nats.PingInterval(20*time.Second), nats.MaxPingsOutstanding(5))
