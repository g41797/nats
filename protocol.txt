https://docs.nats.io/reference/reference-protocols/nats-protocol
https://beta-docs.nats.io/ref/protocols/jetstream ???

Only PUB, MSG, HPUB, and HMSG include payloads.

Field Delimiters: 
    The fields of NATS protocol messages are delimited by 
    whitespace characters (space) or (tab). 
    Multiple whitespace characters will be treated as a single
    field delimiter.

Newlines: 
    NATS uses ␍ followed by ␊ (␍␊, 0x0D0A) to terminate protocol
    messages. This newline sequence is also used to mark the end 
    of the message payload in PUB, MSG, HPUB, and HMSG protocol messages.

Subject names: 
    Subject names, including reply subject names, are case-sensitive and 
    must be non-empty alphanumeric strings with no embedded whitespace. 
    All UTF-8 characters except spaces/tabs and separators which are . and > are allowed.
    Subject names can be optionally token-delimited using the dot character (.), e.g.:

    FOO, BAR, foo.bar, foo.BAR, FOO.BAR and FOO.BAR.BAZ are all valid subject names
    FOO. BAR, foo. .bar andfoo..bar are not valid subject names    

Subscription identifier (sid):
    A unique alphanumeric subscription ID, generated by the client

NATS Message Headers
    https://github.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-4.md

Without payloads    
    INFO        Server  Sent to client after initial TCP/IP connection

                        INFO {"option_name":option_value,...}␍␊
                        
                        INFO {"server_id":"NAURQFRTEZMTT6LIZKVUP7RBHEPD36NAYYTM6DBTLN5UJ4HZOHLI5IUZ","server_name":"NAURQFRTEZMTT6LIZKVUP7RBHEPD36NAYYTM6DBTLN5UJ4HZOHLI5IUZ","version":"2.10.24","proto":1,"git_commit":"1d6f7ea","go":"go1.23.4","host":"0.0.0.0","port":4222,"headers":true,"max_payload":1048576,"jetstream":true,"client_id":6,"client_ip":"172.18.0.1","xkey":"XBQCKF4GTDYB2RKF5EO4XEAW2NLCDYOCHPLAEFGTLTOOPYXM4TWRKU5E"} 
                        
                        INFO 
                            {
                                "server_id":"NBKGIX5B7HTLWXJLNR7QHFPXFCY3S33WJF7QIZLGB75KW2HNQFBNKE2F",
                                "server_name":"NBKGIX5B7HTLWXJLNR7QHFPXFCY3S33WJF7QIZLGB75KW2HNQFBNKE2F",
                                "version":"2.10.24",
                                "proto":1,
                                "git_commit":"1d6f7ea",
                                "go":"go1.23.4",
                                "host":"0.0.0.0",
                                "port":4222,
                                "headers":true,
                                "max_payload":1048576,
                                "jetstream":true,
                                "client_id":5,
                                "client_ip":"172.18.0.1",
                                "xkey":"XBPECVCORYF4FBGNQYMCDY6MDAARYABTXXCULAWNOMPRUNYWXFWUZKLQ"
                            }
                            ␍␊
                
    CONNECT     Client  Sent to server to specify connection information

                        CONNECT {"option_name":option_value,...}␍␊
        
                        CONNECT 
                            {
                                "verbose":false,
                                "pedantic":false,
                                "tls_required":false,
                                "name":"",
                                "lang":"go",
                                "version":"1.2.2",
                                "protocol":1
                            }
                            ␍␊
    
    SUB         Client  Subscribe to a subject (or subject wildcard)

                        SUB <subject> [queue group] <sid>␍␊
                        
                        SUB FOO 1␍␊
                        
                        SUB BAR G1 44␍␊
                
    UNSUB       Client  Unsubscribe (or auto-unsubscribe) from subject

                        UNSUB <sid> [max_msgs]␍␊
                        
                        UNSUB 1␍␊
                        
                        UNSUB 1 5␍␊
                
    PING        Both    PING keep-alive message

                        PING␍␊
                        
    PONG        Both    PONG keep-alive response

                        PONG␍␊
                        
    +OK         Server  Acknowledges well-formed protocol message in verbose mode

                        +OK␍␊
    
    -ERR        Server  Indicates a protocol error. May cause client disconnect.

                        -ERR <error message>␍␊
                
With payloads    
    PUB         Client  Publish a message to a subject, with optional reply subject

                        PUB <subject> [reply-to] <#bytes>␍␊[payload]␍␊
                        
                        PUB FOO 11␍␊Hello NATS!␍␊
                        
                        PUB FRONT.DOOR JOKE.22 11␍␊Knock Knock␍␊
                        
                        PUB NOTIFY 0␍␊␍␊
                
    HPUB        Client  Publish a message to a subject including NATS headers, with optional reply subject

                        HPUB <subject> [reply-to] <#header bytes> <#total bytes>␍␊[headers]␍␊␍␊[payload]␍␊
                        
                        HPUB FOO 22 33␍␊NATS/1.0␍␊Bar: Baz␍␊␍␊Hello NATS!␍␊
                        
                        HPUB FRONT.DOOR JOKE.22 45 56␍␊NATS/1.0␍␊BREAKFAST: donut␍␊LUNCH: burger␍␊␍␊Knock Knock␍␊
                        
                        HPUB MORNING.MENU 47 51␍␊NATS/1.0␍␊BREAKFAST: donut␍␊BREAKFAST: eggs␍␊␍␊Yum!␍␊                    

    MSG         Server  Delivers a message payload to a subscriber

                        MSG <subject> <sid> [reply-to] <#bytes>␍␊
                        [payload]␍␊
                        
                        MSG FOO.BAR 9 11␍␊
                        Hello World␍␊
                        
                        MSG FOO.BAR 9 GREETING.34 11␍␊
                        Hello World␍␊
    
    HMSG        Server  Delivers a message payload to a subscriber with NATS headers

                        HMSG <subject> <sid> [reply-to] <#header bytes> <#total bytes>␍␊
                        [headers]␍␊␍␊
                        [payload]␍␊
        
                        HMSG FOO.BAR 34 45␍␊
                        NATS/1.0␍␊
                        FoodGroup: vegetable␍␊␍␊
                        Hello World␍␊
                        
                        HMSG FOO.BAR 9 BAZ.69 34 45␍␊
                        NATS/1.0␍␊
                        FoodGroup: vegetable␍␊␍␊
                        Hello World␍␊

Connecting
    https://docs.nats.io/using-nats/developer/connecting

    Ping/Pong Protocol
        https://docs.nats.io/using-nats/developer/connecting/pingpong

    Turning Off Echo'd Messages
        https://docs.nats.io/using-nats/developer/connecting/noecho

Request-Reply
    https://docs.nats.io/nats-concepts/core-nats/reqreply

Reply for "$JS.API.INFO" request
{
  "type" : "io.nats.jetstream.api.v1.account_info_response",
  "memory" : 0,
  "storage" : 0,
  "reserved_memory" : 0,
  "reserved_storage" : 0,
  "streams" : 0,
  "consumers" : 0,
  "limits" : {
    "max_memory" : -1,
    "max_storage" : -1,
    "max_streams" : -1,
    "max_consumers" : -1,
    "max_ack_pending" : -1,
    "memory_max_stream_bytes" : -1,
    "storage_max_stream_bytes" : -1,
    "max_bytes_required" : false
  },
  "api" : {
    "total" : 0,
    "errors" : 0
  }
}                                                        

Reply for ""$JS.API.STREAM.DELETE.NONEXISTINGSTREAM" request
{"type":"io.nats.jetstream.api.v1.stream_delete_response","error":{"code":404,"err_code":10059,"description":"stream not found"}}

{
    "type":"io.nats.jetstream.api.v1.stream_delete_response",
    "error": {
        "code":404,
        "err_code":10059, ??? optional
        "description":"stream not found"
    }
}
{"type":"io.nats.jetstream.api.v1.stream_create_response","error":{"code":400,"err_code":10056,"description":"stream name in subject does not match request"}}
{"type":"io.nats.jetstream.api.v1.stream_create_response","config":{"name":"EXISTINGSTREAM","subjects":["EXISTINGSTREAM"],"retention":"limits","max_consumers":-1,"max_msgs":-1,"max_bytes":-1,"max_age":0,"max_msgs_per_subject":-1,"max_msg_size":-1,"discard":"old","storage":"file","num_replicas":1,"duplicate_window":120000000000,"compression":"none","allow_direct":false,"mirror_direct":false,"sealed":false,"deny_delete":false,"deny_purge":false,"allow_rollup_hdrs":false,"consumer_limits":{}},"created":"2025-02-02T08:40:19.933368586Z","state":{"messages":0,"bytes":0,"first_seq":0,"first_ts":"0001-01-01T00:00:00Z","last_seq":0,"last_ts":"0001-01-01T00:00:00Z","consumer_count":0},"ts":"2025-02-02T08:40:19.936023057Z","did_create":true}


Good response:
{
  "type": "io.nats.jetstream.api.v1.stream_names_response",
  "total": 1,
  "offset": 0,
  "limit": 1024,
  "streams": [
    "KV_NATS"
  ]
}

Error response:
{
  "type": "io.nats.jetstream.api.v1.consumer_info_response",
  "error": {
    "code": 404,
    "err_code": 10059,
    "description": "stream not found"
  }
}

Example of APIs
    $JS.API.STREAM.CREATE.%s
    $JS.API.STREAM.UPDATE.%s
    $JS.API.STREAM.NAMES
    $JS.API.STREAM.LIST
    $JS.API.STREAM.INFO.%s
    $JS.API.STREAM.DELETE.%s
    $JS.API.STREAM.PURGE.%s
    $JS.API.STREAM.MSG.DELETE.%s
    $JS.API.STREAM.MSG.GET.%s
    $JS.API.STREAM.SNAPSHOT.%s
    $JS.API.STREAM.RESTORE.%s
    $JS.API.STREAM.PEER.REMOVE.%s
    $JS.API.STREAM.LEADER.STEPDOWN.%s


JetStream Configuration
    https://docs.nats.io/nats-concepts/jetstream/streams

    {"name":"EXISTINGSTREAM","retention":"limits","max_consumers":-1,"max_msgs":-1,"max_bytes":-1,"max_age":0,"max_msgs_per_subject":-1,"max_msg_size":-1,"discard":"old","storage":"file","num_replicas":1,"duplicate_window":120000000000,"compression":"none","allow_direct":false,"mirror_direct":false,"sealed":false,"deny_delete":false,"deny_purge":false,"allow_rollup_hdrs":false}
    

    
NATS design
    https://gitee.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-1.md
    

INFO
====
// ServerInfoV1 identifies remote servers.
type ServerInfoV1 struct {
	Name      string    `json:"name"`
	Host      string    `json:"host"`
	ID        string    `json:"id"`
	Cluster   string    `json:"cluster,omitempty"`
	Version   string    `json:"ver"`
	Seq       uint64    `json:"seq"`
	JetStream bool      `json:"jetstream"`
	Time      time.Time `json:"time"`
}

CONNECT
=======
// ClientInfoV1 is detailed information about the client forming a connection.
type ClientInfoV1 struct {
	Start      time.Time     `json:"start,omitempty"`
	Host       string        `json:"host,omitempty"`
	ID         uint64        `json:"id,omitempty"`
	Account    string        `json:"acc"`
	User       string        `json:"user,omitempty"`
	Name       string        `json:"name,omitempty"`
	Lang       string        `json:"lang,omitempty"`
	Version    string        `json:"ver,omitempty"`
	RTT        time.Duration `json:"rtt,omitempty"`
	Server     string        `json:"server,omitempty"`
	Cluster    string        `json:"cluster,omitempty"`
	Alternates []string      `json:"alts,omitempty"`
	Stop       time.Time     `json:"stop,omitempty"`
	Jwt        string        `json:"jwt,omitempty"`
	IssuerKey  string        `json:"issuer_key,omitempty"`
	NameTag    string        `json:"name_tag,omitempty"`
	Tags       []string      `json:"tags,omitempty"`
	Kind       string        `json:"kind,omitempty"`
	ClientType string        `json:"client_type,omitempty"`
}

https://docs.nats.io/nats-concepts/jetstream/streams
https://docs.nats.io/~gitbook/image?url=https%3A%2F%2F1487470910-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LqMYcZML1bsXrN3Ezg0%252Fuploads%252Fgit-blob-dedcc17f082fa1e39497c54ed8191b6424ee7792%252Fstreams-and-consumers-75p.png%3Falt%3Dmedia&width=768&dpr=4&quality=100&sign=697e5d00&sv=2

Wildcards: 
    NATS supports the use of wildcards in subject subscriptions.

    The asterisk character (*) matches a single token at any level of the subject.

    The greater than symbol (>), also known as the full wildcard, matches one or more 
    tokens at the tail of a subject, and must be the last token. 
    The wildcarded subject foo.> will match foo.bar or foo.bar.baz.1, but not foo.

    Wildcards must be a separate token (foo.*.baz or foo.> are syntactically valid; 
    foo*.bar, f*o.b*r and foo> are not)

    For example, the wildcard subscriptions foo.*.quux and foo.> both match foo.bar.quux, 
    but only the latter matches foo.bar.baz. 
    
    With the full wildcard, it is also possible to express interest in every subject that 
    may exist in NATS: sub > 1, limited of course by authorization settings.


===================================================================

PUB <subject> [reply-to] <#bytes>␍␊[payload]␍␊

MSG <subject> <sid> [reply-to] <#bytes>␍␊
[payload]␍␊

SUB <subject> [queue group] <sid>␍␊
UNSUB <sid> [max_msgs]␍␊

------------------------------------------------------------------------------
Go:
10:28:10 cid:5 - Client connection created
10:28:10 cid:5 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
10:28:10 cid:5 - <<- [PING]
10:28:10 cid:5 - ->> [PONG]
10:28:10 cid:5 - <<- [SUB _INBOX.sqLNnLHBOk5GBwplPCOftp.*  1]
10:28:10 cid:5 - <<- [PUB $JS.API.STREAM.CREATE.ORDERS _INBOX.sqLNnLHBOk5GBwplPCOftp.cvmIort2 289]
10:28:10 cid:5 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDERS\",\"subjects\":[\"orders.*\",\"items.*\"],\"retention\":\"limits\",\"max_consumers\":0,\"max_msgs\":0,\"max_bytes\":0,\"discard\":\"old\",\"max_age\":0,\"max_msgs_per_subject\":0,\"storage\":\"file\",\"num_replicas\":0,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"consumer_limits\":{}}"]
10:28:10 cid:5 - ->> [MSG _INBOX.sqLNnLHBOk5GBwplPCOftp.cvmIort2 1 736]
10:28:11 cid:5 - <<- [UNSUB 1 ]
10:28:11 cid:5 - <-> [DELSUB 1]
10:28:11 cid:5 - <<- [PING]
10:28:11 cid:5 - ->> [PONG]
10:28:11 cid:9 - Client connection created
10:28:11 cid:9 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
10:28:11 cid:9 - <<- [PING]
10:28:11 cid:9 - ->> [PONG]
10:28:11 cid:9 - <<- [SUB SUB1.*  1]
10:28:11 cid:9 - <<- [PUB $JS.API.STREAM.NAMES SUB1.SUFF1 22]
10:28:11 cid:9 - <<- MSG_PAYLOAD: ["{\"subject\":\"orders.*\"}"]
10:28:11 cid:9 - ->> [MSG SUB1.SUFF1 1 112]
10:28:11 cid:9 - <<- [SUB DLVSBJ  2]
10:28:11 cid:9 - <<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.CNSNME.orders.* SUB1.SUFF3 200]
10:28:11 cid:9 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"ORDERS\",\"config\":{\"ack_policy\":\"none\",,\"deliver_subject\":\"DLVSBJ\",\"num_replicas\":0}}"]

10:28:11.260743 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.CNSNME  55]

10:28:11 cid:9 - ->> [MSG SUB1.SUFF3 1 590]

10:28:11 cid:12 - Client connection created
10:28:11 cid:12 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
10:28:11 cid:12 - <<- [PING]
10:28:11 cid:12 - ->> [PONG]
10:28:11 cid:12 - <<- [SUB _INBOX.sqLNnLHBOk5GBwplPCOfvZ.*  1]
10:28:11 cid:12 - <<- [PUB orders.1 _INBOX.sqLNnLHBOk5GBwplPCOfvZ.hvX71xMv 11]
10:28:11 cid:12 - <<- MSG_PAYLOAD: ["First Order"]
10:28:11 cid:12 - ->> [MSG _INBOX.sqLNnLHBOk5GBwplPCOfvZ.hvX71xMv 1 28]

10:28:11 cid:9 - ->> [MSG orders.1 2 $JS.ACK.ORDERS.CNSNME.1.1.1.1742812091263125117.0 11]

10:28:11 cid:12 - <<- [UNSUB 1 ]
10:28:11 cid:12 - <-> [DELSUB 1]
10:28:11 cid:12 - <<- [PING]
10:28:11 cid:12 - ->> [PONG]
10:28:12 cid:5 - Client Ping Timer
10:28:12 cid:5 - ->> [PING]
10:28:13 cid:9 - Client Ping Timer
10:28:13 cid:9 - ->> [PING]
10:28:13 cid:12 - Client Ping Timer
10:28:13 cid:12 - ->> [PING]
10:28:13 cid:12 - <<- [PONG]
10:28:13 cid:5 - <<- [PING]
10:28:13 cid:5 - ->> [PONG]
10:28:13 cid:5 - <<- [PONG]
10:28:14 cid:12 - <<- [PING]
10:28:14 cid:12 - ->> [PONG]
10:28:14 cid:9 - <<- [PONG]
10:28:14 cid:5 - Client connection closed: Client Closed
10:28:14 cid:12 - Client connection closed: Client Closed
10:28:15 cid:9 - <<- [UNSUB 2 ]
10:28:15 cid:9 - <-> [DELSUB 2]
10:28:15 cid:9 - <<- [PING]
10:28:15 cid:9 - ->> [PONG]
10:28:20 cid:9 - <<- [PUB $JS.API.CONSUMER.DELETE.ORDERS.CNSNME SUB1.NhEfmA36 0]
10:28:20 cid:9 - <<- MSG_PAYLOAD: [""]

10:28:20.837270 [TRC] JETSTREAM - <-> [DELSUB 1]
10:28:20.837287 [TRC] JETSTREAM - <-> [DELSUB 55]
10:28:20.837300 [DBG] JETSTREAM - JetStream connection closed: Client Closed
10:28:20.837309 [DBG] JETSTREAM - JetStream connection closed: Client Closed

10:28:20 cid:9 - ->> [MSG SUB1.NhEfmA36 1 75]
10:28:26 cid:9 - <<- [UNSUB 1 ]
10:28:26 cid:9 - <-> [DELSUB 1]
10:28:26 cid:9 - <<- [PING]
10:28:26 cid:9 - ->> [PONG]
10:28:26 cid:9 - <<- [PING]
10:28:26 cid:9 - ->> [PONG]
10:28:26 cid:9 - Client connection closed: Client Closed


==================================================================================
Zig:

2025-03-24T10:54:49.419386530Z [1] 2025/03/24 10:54:49.418963 [DBG] 172.18.0.1:36462 - cid:6 - Client connection created
2025-03-24T10:54:49.420237356Z [1] 2025/03/24 10:54:49.420086 [TRC] 172.18.0.1:36462 - cid:6 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true, "no_responders":true, "headers":true}]
2025-03-24T10:54:49.420313438Z [1] 2025/03/24 10:54:49.420275 [TRC] 172.18.0.1:36462 - cid:6 - <<- [SUB 344D980E-A6A1-4DC3-942D-27BFE9AFE650.* 1 ]
2025-03-24T10:54:49.420333765Z [1] 2025/03/24 10:54:49.420314 [TRC] 172.18.0.1:36462 - cid:6 - <<- [PUB $JS.API.STREAM.CREATE.ORDERS 344D980E-A6A1-4DC3-942D-27BFE9AFE650.2 402]
2025-03-24T10:54:49.420363250Z [1] 2025/03/24 10:54:49.420327 [TRC] 172.18.0.1:36462 - cid:6 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDERS\",\"subjects\":[\"orders.*\",\"items.*\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
2025-03-24T10:54:49.422375081Z [1] 2025/03/24 10:54:49.422287 [TRC] 172.18.0.1:36462 - cid:6 - ->> [MSG 344D980E-A6A1-4DC3-942D-27BFE9AFE650.2 1 736]
2025-03-24T10:54:49.423606026Z [1] 2025/03/24 10:54:49.423534 [TRC] 172.18.0.1:36462 - cid:6 - <<- [UNSUB 1]
2025-03-24T10:54:49.423636673Z [1] 2025/03/24 10:54:49.423553 [TRC] 172.18.0.1:36462 - cid:6 - <-> [DELSUB 1]
2025-03-24T10:54:50.480462930Z [1] 2025/03/24 10:54:50.480337 [DBG] 172.18.0.1:36462 - cid:6 - Client connection closed: Client Closed
2025-03-24T10:54:50.481893376Z [1] 2025/03/24 10:54:50.481782 [DBG] 172.18.0.1:36472 - cid:10 - Client connection created
2025-03-24T10:54:50.483279250Z [1] 2025/03/24 10:54:50.483176 [TRC] 172.18.0.1:36472 - cid:10 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true, "no_responders":true, "headers":true}]
2025-03-24T10:54:50.483442063Z [1] 2025/03/24 10:54:50.483408 [TRC] 172.18.0.1:36472 - cid:10 - <<- [SUB SUB1.* 1 ]
2025-03-24T10:54:50.483618743Z [1] 2025/03/24 10:54:50.483564 [TRC] 172.18.0.1:36472 - cid:10 - <<- [SUB DLVSBJ.* 2 ]
2025-03-24T10:54:50.483641215Z [1] 2025/03/24 10:54:50.483580 [TRC] 172.18.0.1:36472 - cid:10 - <<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.CNSNME.orders.* DLVSBJ.3 322]
2025-03-24T10:54:50.483652696Z [1] 2025/03/24 10:54:50.483589 [TRC] 172.18.0.1:36472 - cid:10 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"ORDERS\",\"config\":{\"ack_policy\":\"none\",\"ack_wait\":79200000000000,\"deliver_subject\":\"SUB1\",,\"headers_only\":false,\"num_replicas\":1,\"mem_storage\":true,\"inactive_threshold\":300000000000}}"]
2025-03-24T10:54:50.483992880Z [1] 2025/03/24 10:54:50.483953 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.CNSNME  55]
2025-03-24T10:54:50.484196079Z [1] 2025/03/24 10:54:50.484149 [TRC] 172.18.0.1:36472 - cid:10 - ->> [MSG DLVSBJ.3 2 696]
2025-03-24T10:54:50.486349664Z [1] 2025/03/24 10:54:50.486257 [DBG] 172.18.0.1:36486 - cid:13 - Client connection created
2025-03-24T10:54:50.487804316Z [1] 2025/03/24 10:54:50.487714 [TRC] 172.18.0.1:36486 - cid:13 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true, "no_responders":true, "headers":true}]
2025-03-24T10:54:50.487975815Z [1] 2025/03/24 10:54:50.487923 [TRC] 172.18.0.1:36486 - cid:13 - <<- [SUB 93AADBFA-65F3-4FB3-BA01-529A52F4F908.* 1 ]
2025-03-24T10:54:50.488013085Z [1] 2025/03/24 10:54:50.487963 [TRC] 172.18.0.1:36486 - cid:13 - <<- [PUB orders.1 93AADBFA-65F3-4FB3-BA01-529A52F4F908.2 11]
2025-03-24T10:54:50.488025007Z [1] 2025/03/24 10:54:50.487974 [TRC] 172.18.0.1:36486 - cid:13 - <<- MSG_PAYLOAD: ["First Order"]
2025-03-24T10:54:50.488224459Z [1] 2025/03/24 10:54:50.488175 [TRC] 172.18.0.1:36486 - cid:13 - ->> [MSG 93AADBFA-65F3-4FB3-BA01-529A52F4F908.2 1 28]
2025-03-24T10:54:50.489286328Z [1] 2025/03/24 10:54:50.489168 [TRC] 172.18.0.1:36486 - cid:13 - <<- [UNSUB 1]
2025-03-24T10:54:50.489317667Z [1] 2025/03/24 10:54:50.489205 [TRC] 172.18.0.1:36486 - cid:13 - <-> [DELSUB 1]
2025-03-24T10:54:51.504783059Z [1] 2025/03/24 10:54:51.504589 [DBG] 172.18.0.1:36486 - cid:13 - Client connection closed: Client Closed
2025-03-24T10:54:52.502514051Z [1] 2025/03/24 10:54:52.502243 [DBG] 172.18.0.1:36472 - cid:10 - Client Ping Timer
2025-03-24T10:54:52.502653902Z [1] 2025/03/24 10:54:52.502292 [TRC] 172.18.0.1:36472 - cid:10 - ->> [PING]
2025-03-24T10:54:52.503154455Z [1] 2025/03/24 10:54:52.503043 [TRC] 172.18.0.1:36472 - cid:10 - <<- [PONG]
2025-03-24T10:54:56.505758967Z [1] 2025/03/24 10:54:56.505601 [TRC] 172.18.0.1:36472 - cid:10 - <<- [PUB $JS.API.CONSUMER.DELETE.ORDERS.CNSNME DLVSBJ.4 0]
2025-03-24T10:54:56.505804542Z [1] 2025/03/24 10:54:56.505638 [TRC] 172.18.0.1:36472 - cid:10 - <<- MSG_PAYLOAD: [""]
2025-03-24T10:54:56.505912303Z [1] 2025/03/24 10:54:56.505840 [TRC] JETSTREAM - <-> [DELSUB 1]
2025-03-24T10:54:56.505946546Z [1] 2025/03/24 10:54:56.505866 [TRC] JETSTREAM - <-> [DELSUB 55]
2025-03-24T10:54:56.505965832Z [1] 2025/03/24 10:54:56.505889 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-03-24T10:54:56.505989607Z [1] 2025/03/24 10:54:56.505904 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-03-24T10:54:56.506077891Z [1] 2025/03/24 10:54:56.506024 [TRC] 172.18.0.1:36472 - cid:10 - ->> [MSG DLVSBJ.4 2 75]
2025-03-24T10:54:56.506556814Z [1] 2025/03/24 10:54:56.506471 [TRC] 172.18.0.1:36472 - cid:10 - <<- [UNSUB 1]
2025-03-24T10:54:56.506579206Z [1] 2025/03/24 10:54:56.506493 [TRC] 172.18.0.1:36472 - cid:10 - <-> [DELSUB 1]
2025-03-24T10:54:56.547571393Z [1] 2025/03/24 10:54:56.547432 [TRC] 172.18.0.1:36472 - cid:10 - <<- [UNSUB 2]
2025-03-24T10:54:56.547617138Z [1] 2025/03/24 10:54:56.547453 [TRC] 172.18.0.1:36472 - cid:10 - <-> [DELSUB 2]
2025-03-24T10:54:57.520498736Z [1] 2025/03/24 10:54:57.520350 [DBG] 172.18.0.1:36472 - cid:10 - Client connection closed: Client Closed



Go vs Zig

 <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
 <<- [SUB SUB1.*  1]
                     <<- [PUB $JS.API.STREAM.NAMES SUB1.SUFF1 22]
                     <<- MSG_PAYLOAD: ["{\"subject\":\"orders.*\"}"]
                     ->> [MSG SUB1.SUFF1 1 112]
 <<- [SUB DLVSBJ  2]
 <<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.CNSNME.orders.* SUB1.SUFF3 200]
 <<- MSG_PAYLOAD: ["{\"stream_name\":\"ORDERS\",\"config\":{\"ack_policy\":\"none\",,\"deliver_subject\":\"DLVSBJ\",\"num_replicas\":0}}"]

JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.CNSNME  55]

->> [MSG SUB1.SUFF3 1 590]
->> [MSG orders.1 2 $JS.ACK.ORDERS.CNSNME.1.1.1.1742812091263125117.0 11]



<<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":0,"echo":true, "no_responders":true, "headers":true}]
<<- [SUB SUB1.* 1 ]
<<- [SUB DLVSBJ.* 2 ]
<<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.CNSNME.orders.* DLVSBJ.3 322]
<<- MSG_PAYLOAD: ["{\"stream_name\":\"ORDERS\",\"config\":{\"ack_policy\":\"none\",\"ack_wait\":79200000000000,\"deliver_subject\":\"SUB1\",,\"headers_only\":false,\"num_replicas\":1,\"mem_storage\":true,\"inactive_threshold\":300000000000}}"]

JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.CNSNME  55]

->> [MSG DLVSBJ.3 2 696]

=========================================================

G<<- [CONNECT {"name":"","protocol":1}]
Z<<- [CONNECT {"protocol":0}]


G<<- [SUB SUB1.*  1]
Z<<- [SUB SUB1.* 1 ]

G<<- [SUB DLVSBJ  2]
Z<<- [SUB DLVSBJ.* 2 ]

G<<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.CNSNME.orders.* SUB1.SUFF3 200]
Z<<- [PUB $JS.API.CONSUMER.CREATE.ORDERS.CNSNME.orders.* DLVSBJ.3 322]

G["{\"config\":{\"num_replicas\":0, \"deliver_subject\":\"DLVSBJ\"}}"]
Z["{\"config\":{\"num_replicas\":1, \"deliver_subject\":\"SUB1\",      \"ack_wait\":79200000000000,\"headers_only\":false,\"mem_storage\":true,\"inactive_threshold\":300000000000}}"]


G JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.CNSNME  55]
Z JETSTREAM - <<- [SUB $JSC.CI.$G.ORDERS.CNSNME  55]

G->> [MSG SUB1.SUFF3 1 590]
Z->> [MSG DLVSBJ.3 2 696]

G->> [MSG orders.1 2 $JS.ACK.ORDERS.CNSNME.1.1.1.1742812091263125117.0 11]
Z --------

=================================

    public function testConsumer1()
    {
        $api = $this->getClient()
            ->skipInvalidMessages(true)
            ->getApi();

        $this->assertSame($api->getInfo()->streams, 0);

        $stream = $api->getStream('my_stream');

        $stream->getConfiguration()
            ->setRetentionPolicy(RetentionPolicy::WORK_QUEUE)
            ->setSubjects(['tester.greet', 'tester.bye']);

        $stream->create();

        $this->called = null;
        $consumer = $stream->getConsumer('greet_consumer');
        $consumer->getConfiguration()->setSubjectFilter('tester.greet');
        $consumer->create();

        $this->assertNull($this->called);
        $consumer->setIterations(1);
        $consumer->handle($this->persistMessage(...));

        $this->assertNull($this->called);
        $stream->put('tester.greet', [ 'name' => 'nekufa' ]);
        $consumer->setIterations(1)->setExpires(1);
        $consumer->handle($this->persistMessage(...));

        $this->assertNotNull($this->called);
        $this->assertSame($this->called->name, 'nekufa');
        $this->assertNotNull($this->called->timestampNanos);

        $this->called = null;
    }


cid:26 - Client connection created
cid:26 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]

            $api->getInfo()
cid:26 - <<- [SUB _INBOX.19913cc3e45dd2b422003630bba6e189 aab65afe]
cid:26 - <<- [PUB $JS.API.INFO _INBOX.19913cc3e45dd2b422003630bba6e189 2]
cid:26 - <<- MSG_PAYLOAD: ["{}"]
cid:26 - ->> [MSG _INBOX.19913cc3e45dd2b422003630bba6e189 aab65afe 364]
cid:26 - <<- [UNSUB aab65afe]
cid:26 - <-> [DELSUB aab65afe]

            $stream->create()
cid:26 - <<- [SUB _INBOX.ed10c4d94c6fdabfd55b16181d58454b 967499d8]
cid:26 - <<- [PUB $JS.API.STREAM.CREATE.my_stream _INBOX.ed10c4d94c6fdabfd55b16181d58454b 231]
cid:26 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"my_stream\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"file\",\"subjects\":[\"tester.greet\",\"tester.bye\"]}"]
cid:26 - ->> [MSG _INBOX.ed10c4d94c6fdabfd55b16181d58454b 967499d8 746]
cid:26 - <<- [UNSUB 967499d8]
cid:26 - <-> [DELSUB 967499d8]

cid:26 - <<- [SUB _INBOX.81f151234cd5719f2e5f8abc92e246ef 1c3da0a6]
cid:26 - <<- [PUB $JS.API.CONSUMER.NAMES.my_stream _INBOX.81f151234cd5719f2e5f8abc92e246ef 2]
cid:26 - <<- MSG_PAYLOAD: ["{}"]
cid:26 - ->> [MSG _INBOX.81f151234cd5719f2e5f8abc92e246ef 1c3da0a6 108]
cid:26 - <<- [UNSUB 1c3da0a6]
cid:26 - <-> [DELSUB 1c3da0a6]

cid:26 - <<- [SUB _INBOX.64ca8fda84a748bc82de6e2d54ef1e99 107a8a1b]
cid:26 - <<- [PUB $JS.API.CONSUMER.DURABLE.CREATE.my_stream.greet_consumer _INBOX.64ca8fda84a748bc82de6e2d54ef1e99 175]
cid:26 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"my_stream\",\"config\":{\"ack_policy\":\"explicit\",\"deliver_policy\":\"all\",\"durable_name\":\"greet_consumer\",\"replay_policy\":\"instant\",\"filter_subject\":\"tester.greet\"}}"]
cid:26 - ->> [MSG _INBOX.64ca8fda84a748bc82de6e2d54ef1e99 107a8a1b 600]
cid:26 - <<- [UNSUB 107a8a1b]
cid:26 - <-> [DELSUB 107a8a1b]

cid:26 - <<- [SUB handler.df1e02d1 e29abbca]
cid:26 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.my_stream.greet_consumer handler.df1e02d1 31]
cid:26 - <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":100000000}"]
cid:26 - ->> [HMSG handler.df1e02d1 e29abbca 81 81]
cid:26 - <<- [UNSUB e29abbca]
cid:26 - <-> [DELSUB e29abbca]

cid:26 - <<- [PUB tester.greet 17]
cid:26 - <<- MSG_PAYLOAD: ["{\"name\":\"nekufa\"}"]
cid:26 - <<- [SUB handler.c16d486a dc912530]
cid:26 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.my_stream.greet_consumer handler.c16d486a 32]
cid:26 - <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":1000000000}"]
cid:26 - ->> [MSG tester.greet dc912530 $JS.ACK.my_stream.greet_consumer.1.1.1.1743924180520632081.0 17]
cid:26 - <<- [PUB $JS.ACK.my_stream.greet_consumer.1.1.1.1743924180520632081.0  0]
cid:26 - <<- MSG_PAYLOAD: [""]
cid:26 - <<- [UNSUB dc912530]
cid:26 - <-> [DELSUB dc912530]

cid:26 - <<- [SUB _INBOX.cefb61258c6c273a460e107db5ce6e4f c715812a]
cid:26 - <<- [PUB $JS.API.STREAM.NAMES _INBOX.cefb61258c6c273a460e107db5ce6e4f 2]
cid:26 - <<- MSG_PAYLOAD: ["{}"]
cid:26 - ->> [MSG _INBOX.cefb61258c6c273a460e107db5ce6e4f c715812a 115]
cid:26 - <<- [UNSUB c715812a]
cid:26 - <-> [DELSUB c715812a]

cid:26 - <<- [SUB _INBOX.eb2327b56c9c28733371756e68d1f092 0ffbf000]
cid:26 - <<- [PUB $JS.API.STREAM.NAMES _INBOX.eb2327b56c9c28733371756e68d1f092 2]
cid:26 - <<- MSG_PAYLOAD: ["{}"]
cid:26 - ->> [MSG _INBOX.eb2327b56c9c28733371756e68d1f092 0ffbf000 115]
cid:26 - <<- [UNSUB 0ffbf000]
cid:26 - <-> [DELSUB 0ffbf000]

cid:26 - <<- [SUB _INBOX.1cd960ad4512151bad820c35e358c52f 5b285a98]
cid:26 - <<- [PUB $JS.API.STREAM.DELETE.my_stream _INBOX.1cd960ad4512151bad820c35e358c52f 2]
cid:26 - <<- MSG_PAYLOAD: ["{}"]
cid:26 - ->> [MSG _INBOX.1cd960ad4512151bad820c35e358c52f 5b285a98 73]
cid:26 - <<- [UNSUB 5b285a98]
cid:26 - <-> [DELSUB 5b285a98]

cid:26 - Client connection closed: Client Closed

===============================================
cid:36 - Client connection created
cid:36 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":1,"echo":true, "no_responders":true, "headers":true}]

cid:36 - <<- [SUB UNIQUEID.* 1 ]

            js.DELETE(STREAM)
cid:36 - <<- [PUB $JS.API.STREAM.DELETE.ORDS UNIQUEID.2 0]
cid:36 - <<- MSG_PAYLOAD: [""]
cid:36 - ->> [MSG UNIQUEID.2 1 129]

            js.CREATE(&CONF)
cid:36 - <<- [PUB $JS.API.STREAM.CREATE.ORDS UNIQUEID.3 388]
cid:36 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:36 - ->> [MSG UNIQUEID.3 1 727]

            js.UPDATE(&CONF)
cid:36 - <<- [PUB $JS.API.STREAM.UPDATE.ORDS UNIQUEID.4 388]
cid:36 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:36 - ->> [MSG UNIQUEID.4 1 709]

            js.PUBLISH("ords.received", null, "First Order")
cid:36 - <<- [PUB ords.received UNIQUEID.5 11]
cid:36 - <<- MSG_PAYLOAD: ["First Order"]
cid:36 - ->> [MSG UNIQUEID.5 1 26]

            js.PURGE(STREAM)
cid:36 - <<- [PUB $JS.API.STREAM.PURGE.ORDS UNIQUEID.6 0]
cid:36 - <<- MSG_PAYLOAD: [""]
cid:36 - ->> [MSG UNIQUEID.6 1 83]

            js.DELETE(STREAM)
cid:36 - <<- [PUB $JS.API.STREAM.DELETE.ORDS UNIQUEID.7 0]
cid:36 - <<- MSG_PAYLOAD: [""]
cid:36 - ->> [MSG UNIQUEID.7 1 73]

cid:36 - <<- [UNSUB 1]
cid:36 - <-> [DELSUB 1]
cid:36 - Client connection closed: Client Closed
===================================================================

cid:40 - Client connection created
cid:40 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]

cid:40 - <<- [SUB _INBOX.ff6202eba4a33041be0fc0bf98e5f463 7c600220]
cid:40 - <<- [PUB $JS.API.STREAM.CREATE.ORDS _INBOX.ff6202eba4a33041be0fc0bf98e5f463 228]
cid:40 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"ORDS\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"memory\",\"subjects\":[\"tester.greet\",\"tester.bye\"]}"]
cid:40 - ->> [MSG _INBOX.ff6202eba4a33041be0fc0bf98e5f463 7c600220 744]
cid:40 - <<- [UNSUB 7c600220]
cid:40 - <-> [DELSUB 7c600220]

cid:40 - <<- [SUB _INBOX.f871f02a0895b65046cae28d2c6be869 7770f413]
cid:40 - <<- [PUB $JS.API.STREAM.INFO.ORDS _INBOX.f871f02a0895b65046cae28d2c6be869 2]
cid:40 - <<- MSG_PAYLOAD: ["{}"]
cid:40 - ->> [MSG _INBOX.f871f02a0895b65046cae28d2c6be869 7770f413 835]
cid:40 - <<- [UNSUB 7770f413]
cid:40 - <-> [DELSUB 7770f413]

cid:40 - <<- [SUB _INBOX.6571821b70838b8595c27492f6c8c479 3bc17250]
cid:40 - <<- [PUB $JS.API.STREAM.UPDATE.ORDS _INBOX.6571821b70838b8595c27492f6c8c479 215]
cid:40 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"ORDS\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"memory\",\"subjects\":[\"tester.greet\"]}"]
cid:40 - ->> [MSG _INBOX.6571821b70838b8595c27492f6c8c479 3bc17250 713]
cid:40 - <<- [UNSUB 3bc17250]
cid:40 - <-> [DELSUB 3bc17250]

cid:40 - <<- [SUB _INBOX.f743a44ce711cc79b9b02f4c75794093 4daa1a79]
cid:40 - <<- [PUB $JS.API.STREAM.NAMES _INBOX.f743a44ce711cc79b9b02f4c75794093 2]
cid:40 - <<- MSG_PAYLOAD: ["{}"]
cid:40 - ->> [MSG _INBOX.f743a44ce711cc79b9b02f4c75794093 4daa1a79 110]
cid:40 - <<- [UNSUB 4daa1a79]
cid:40 - <-> [DELSUB 4daa1a79]

cid:40 - <<- [SUB _INBOX.2f55c4b6faf9d87b2bf506086a3b0760 c8c21298]
cid:40 - <<- [PUB $JS.API.STREAM.PURGE.ORDS _INBOX.2f55c4b6faf9d87b2bf506086a3b0760 2]
cid:40 - <<- MSG_PAYLOAD: ["{}"]
cid:40 - ->> [MSG _INBOX.2f55c4b6faf9d87b2bf506086a3b0760 c8c21298 83]
cid:40 - <<- [UNSUB c8c21298]
cid:40 - <-> [DELSUB c8c21298]

cid:40 - <<- [SUB _INBOX.5d9957f7b53c924ce5a33a66b74bee30 11ab983c]
cid:40 - <<- [PUB $JS.API.STREAM.NAMES _INBOX.5d9957f7b53c924ce5a33a66b74bee30 2]
cid:40 - <<- MSG_PAYLOAD: ["{}"]
cid:40 - ->> [MSG _INBOX.5d9957f7b53c924ce5a33a66b74bee30 11ab983c 110]
cid:40 - <<- [UNSUB 11ab983c]
cid:40 - <-> [DELSUB 11ab983c]

cid:40 - <<- [SUB _INBOX.0d8c3f111a204b031c2a1345fd32cd6d 9c9ad39d]
cid:40 - <<- [PUB $JS.API.STREAM.DELETE.ORDS _INBOX.0d8c3f111a204b031c2a1345fd32cd6d 2]
cid:40 - <<- MSG_PAYLOAD: ["{}"]
cid:40 - ->> [MSG _INBOX.0d8c3f111a204b031c2a1345fd32cd6d 9c9ad39d 73]
cid:40 - <<- [UNSUB 9c9ad39d]
cid:40 - <-> [DELSUB 9c9ad39d]

cid:44 - Client connection created
cid:44 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]
cid:44 - <<- [SUB _INBOX.fbab9dfe7a41accc7858128e8de782e9 40552175]
cid:44 - <<- [PUB $JS.API.STREAM.NAMES _INBOX.fbab9dfe7a41accc7858128e8de782e9 2]
cid:44 - <<- MSG_PAYLOAD: ["{}"]
cid:44 - ->> [MSG _INBOX.fbab9dfe7a41accc7858128e8de782e9 40552175 106]
cid:44 - <<- [UNSUB 40552175]
cid:44 - <-> [DELSUB 40552175]
cid:44 - Client connection closed: Client Closed
cid:40 - Client connection closed: Client Closed


=================================== public function testBaseApi()
PUB <subject> [reply-to] <#bytes>␍␊[payload]␍␊

MSG <subject> <sid> [reply-to] <#bytes>␍␊
[payload]␍␊

SUB <subject> [queue group] <sid>␍␊
UNSUB <sid> [max_msgs]␍␊


cid:45 - Client connection created
cid:45 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]

                STREAM.CREATE
cid:45 - <<- [SUB UNIQUEID-1 sid-1]
cid:45 - <<- [PUB $JS.API.STREAM.CREATE.ORDS UNIQUEID-1 228]
cid:45 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"ORDS\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"memory\",\"subjects\":[\"tester.greet\",\"tester.bye\"]}"]
cid:45 - ->> [MSG UNIQUEID-1 sid-1 742]
cid:45 - <<- [UNSUB sid-1]
cid:45 - <-> [DELSUB sid-1]

                STREAM.UPDATE
cid:45 - <<- [SUB _INBOX.e90d54b82914761e521c002345fe8562 778d29eb]
cid:45 - <<- [PUB $JS.API.STREAM.UPDATE.ORDS _INBOX.e90d54b82914761e521c002345fe8562 215]
cid:45 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"ORDS\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"memory\",\"subjects\":[\"tester.greet\"]}"]
LSUB 2]
cid:45 - ->> [MSG _INBOX.e90d54b82914761e521c002345fe8562 778d29eb 712]
cid:45 - <<- [UNSUB 778d29eb]
cid:45 - <-> [DELSUB 778d29eb]

                STREAM.PURGE
cid:45 - <<- [SUB _INBOX.ef60f2ccd9b5dda2563eb13faa801af2 41cfc40c]
cid:45 - <<- [PUB $JS.API.STREAM.PURGE.ORDS _INBOX.ef60f2ccd9b5dda2563eb13faa801af2 2]
cid:45 - <<- MSG_PAYLOAD: ["{}"]
cid:45 - ->> [MSG _INBOX.ef60f2ccd9b5dda2563eb13faa801af2 41cfc40c 83]
cid:45 - <<- [UNSUB 41cfc40c]
cid:45 - <-> [DELSUB 41cfc40c]

                STREAM.DELETE
cid:45 - <<- [SUB UNIQUEID-2 sid-2]
cid:45 - <<- [PUB $JS.API.STREAM.DELETE.ORDS UNIQUEID-2 2]
cid:45 - <<- MSG_PAYLOAD: ["{}"]
id:45 - ->> [MSG UNIQUEID-2 sid-2 73]
id:45 - <<- [UNSUB sid-2]
id:45 - <-> [DELSUB sid-2]

===============================================================


=============================================================== test "min jetstream requests"

cid:50 - Client connection created
cid:50 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":1,"echo":true, "no_responders":true, "headers":true}]

cid:50 - <<- [SUB UNIQUEID-1.* 1 ]

cid:50 - <<- [PUB $JS.API.STREAM.CREATE.ORDS UNIQUEID-1.2 388]
cid:50 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:50 - ->> [MSG UNIQUEID-1.2 1 727]

cid:50 - <<- [PUB $JS.API.STREAM.UPDATE.ORDS UNIQUEID-1.3 388]
cid:50 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:50 - ->> [MSG UNIQUEID-1.3 1 709]

cid:50 - <<- [PUB $JS.API.STREAM.PURGE.ORDS UNIQUEID-1.4 0]
cid:50 - <<- MSG_PAYLOAD: [""]
cid:50 - ->> [MSG UNIQUEID-1.4 1 83]

cid:50 - <<- [PUB $JS.API.STREAM.DELETE.ORDS UNIQUEID-1.5 0]
cid:50 - <<- MSG_PAYLOAD: [""]
cid:50 - ->> [MSG UNIQUEID-1.5 1 73]

cid:50 - <<- [UNSUB 1]
cid:50 - <-> [DELSUB 1]

cid:50 - Client connection closed: Client Closed
======================

======================
                STREAM.CREATE
<<- [SUB UNIQUEID-1 sub-1]
<<- [PUB $JS.API.STREAM.CREATE.ORDS UNIQUEID-1 228]
<<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"ORDS\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"memory\",\"subjects\":[\"tester.greet\",\"tester.bye\"]}"]
->> [MSG UNIQUEID-1 sub-1 742]
<<- [UNSUB sub-1]
<-> [DELSUB sub-1]

                STREAM.DELETE
<<- [SUB UNIQUEID-2 sub-2]
<<- [PUB $JS.API.STREAM.DELETE.ORDS UNIQUEID-2 2]
<<- MSG_PAYLOAD: ["{}"]
->> [MSG UNIQUEID-2 sub-2 73]
<<- [UNSUB sub-2]
<-> [DELSUB sub-2]
======================

======================
                SUBSCRIBE
<<- [SUB UNIQUEID-1.* sub-# ]

                STREAM.CREATE
<<- [PUB $JS.API.STREAM.CREATE.ORDS UNIQUEID-1.1 388]
<<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
->> [MSG UNIQUEID-1.1 sub-# 727]

                STREAM.DELETE
<<- [PUB $JS.API.STREAM.DELETE.ORDS UNIQUEID-1.2 0]
<<- MSG_PAYLOAD: [""]
->> [MSG UNIQUEID-1.2 sub-# 73]

                UNSUBSCRIBE
<<- [UNSUB sub-#]
<-> [DELSUB sub-#]
======================


=================================
<<- SUB <subject>  <sid>␍␊

    REQUEST
<<- PUB <subject> [reply-to] <#bytes>␍␊[payload]␍␊

    RESPONSE
->> MSG <subject> <sid> [reply-to] <#bytes>␍␊[payload]␍␊


<<- UNSUB <sid> [max_msgs]␍␊


<<- SUB subject                                 sid
    SUB MAINSUBJ.*                              RSID
    SUB D505141D-39EB-46F2-A54C-A374AF894D36.*  1

    REQUEST
            PUB subject                     reply-to ...
        <<- PUB subject                     MAINSUBJ.NEXTSID ...
            PUB $JS.API.STREAM.CREATE.ORDS  D505141D-39EB-46F2-A54C-A374AF894D36.2
    
    RESPONSE
            MSG subject                                 sid
        ->> MSG reply-to                                RSID
            MSG D505141D-39EB-46F2-A54C-A374AF894D36.2  1
        
  
<<- UNSUB sid
    UNSUB RSID
    UNSUB 1


cid:15399 - Client connection created
cid:15399 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":1,"echo":true, "no_responders":true, "headers":true}]

cid:15399 - <<- [SUB D505141D-39EB-46F2-A54C-A374AF894D36.* 1 ]
cid:15399 - <<- [PUB $JS.API.STREAM.CREATE.ORDS D505141D-39EB-46F2-A54C-A374AF894D36.2 388]
cid:15399 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:15399 - ->> [MSG D505141D-39EB-46F2-A54C-A374AF894D36.2 1 726]
cid:15399 - <<- [PUB $JS.API.STREAM.UPDATE.ORDS D505141D-39EB-46F2-A54C-A374AF894D36.3 388]
cid:15399 - <<- MSG_PAYLOAD: ["{\"name\":\"ORDS\",\"subjects\":[\"ords.>\"],\"retention\":\"limits\",\"max_consumers\":-1,\"max_msgs\":-1,\"max_bytes\":-1,\"max_age\":0,\"max_msgs_per_subject\":-1,\"max_msg_size\":-1,\"discard\":\"old\",\"storage\":\"file\",\"num_replicas\":1,\"duplicate_window\":120000000000,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"sealed\":false,\"deny_delete\":false,\"deny_purge\":false,\"allow_rollup_hdrs\":false}"]
cid:15399 - ->> [MSG D505141D-39EB-46F2-A54C-A374AF894D36.3 1 709]
cid:15399 - <<- [PUB $JS.API.STREAM.PURGE.ORDS D505141D-39EB-46F2-A54C-A374AF894D36.4 0]
cid:15399 - <<- MSG_PAYLOAD: [""]
cid:15399 - ->> [MSG D505141D-39EB-46F2-A54C-A374AF894D36.4 1 83]
cid:15399 - <<- [PUB $JS.API.STREAM.DELETE.ORDS D505141D-39EB-46F2-A54C-A374AF894D36.5 0]
cid:15399 - <<- MSG_PAYLOAD: [""]
cid:15399 - ->> [MSG D505141D-39EB-46F2-A54C-A374AF894D36.5 1 73]
cid:15399 - <<- [UNSUB 1]
cid:15399 - <-> [DELSUB 1]
cid:15399 - Client connection closed: Client Closed


=========================

Zig:
<<- SUB subject                                 sid
    SUB D505141D-39EB-46F2-A54C-A374AF894D36.*  1

    REQUEST
            PUB subject                     reply-to ...
            PUB $JS.API.STREAM.PURGE.ORDS  D505141D-39EB-46F2-A54C-A374AF894D36.2   ...
    
    RESPONSE
            MSG subject                                 sid
            MSG D505141D-39EB-46F2-A54C-A374AF894D36.2  1
        
  
<<- UNSUB sid
    UNSUB 1

PHP:
    SUB subject                                 sid
    SUB _INBOX.ef60f2ccd9b5dda2563eb13faa801af2 41cfc40c
    
        PUB subject                   reply-to ...
        PUB $JS.API.STREAM.PURGE.ORDS _INBOX.ef60f2ccd9b5dda2563eb13faa801af2 ...
        
        MSG subject                                 sid
        MSG _INBOX.ef60f2ccd9b5dda2563eb13faa801af2 41cfc40c    ...
        
    UNSUB 41cfc40c


=======================
cid:21 - Client connection created
cid:21 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]

cid:21 - <<- [SUB _REQS9e29134298cc789d2f9114cf79719c04.* _REQS1]

cid:21 - <<- [PUB $JS.API.STREAM.CREATE.purge _REQS9e29134298cc789d2f9114cf79719c04.3 207]
cid:21 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"purge\",\"num_replicas\":1,\"retention\":\"workqueue\",\"storage\":\"file\",\"subjects\":[\"purge\"]}"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.3 _REQS1 722]

cid:21 - <<- [PUB $JS.API.CONSUMER.NAMES.purge _REQS9e29134298cc789d2f9114cf79719c04.5 2]
cid:21 - <<- MSG_PAYLOAD: ["{}"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.5 _REQS1 108]
cid:21 - <<- [PUB $JS.API.CONSUMER.DURABLE.CREATE.purge.purge _REQS9e29134298cc789d2f9114cf79719c04.7 155]
cid:21 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"purge\",\"config\":{\"ack_policy\":\"explicit\",\"deliver_policy\":\"all\",\"durable_name\":\"purge\",\"replay_policy\":\"instant\",\"filter_subject\":\"purge\"}}"]
2025-04-13T05:41:33.729945291Z [1] 2025/04/13 05:41:33.729885 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.purge.purge  57]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.7 _REQS1 572]
cid:21 - <<- [PUB purge _REQS9e29134298cc789d2f9114cf79719c04.9 5]
cid:21 - <<- MSG_PAYLOAD: ["first"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.9 _REQS1 27]
cid:21 - <<- [PUB purge _REQS9e29134298cc789d2f9114cf79719c04.11 6]
cid:21 - <<- MSG_PAYLOAD: ["second"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.11 _REQS1 27]
cid:21 - <<- [PUB $JS.API.CONSUMER.INFO.purge.purge _REQS9e29134298cc789d2f9114cf79719c04.13 2]
cid:21 - <<- MSG_PAYLOAD: ["{}"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.13 _REQS1 570]
cid:21 - <<- [PUB $JS.API.STREAM.NAMES _REQS9e29134298cc789d2f9114cf79719c04.15 2]
cid:21 - <<- MSG_PAYLOAD: ["{}"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.15 _REQS1 111]
cid:21 - <<- [PUB $JS.API.STREAM.PURGE.purge _REQS9e29134298cc789d2f9114cf79719c04.17 2]
cid:21 - <<- MSG_PAYLOAD: ["{}"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.17 _REQS1 83]
cid:21 - <<- [PUB $JS.API.CONSUMER.INFO.purge.purge _REQS9e29134298cc789d2f9114cf79719c04.19 2]
cid:21 - <<- MSG_PAYLOAD: ["{}"]
cid:21 - ->> [MSG _REQS9e29134298cc789d2f9114cf79719c04.19 _REQS1 570]
cid:27 - Client connection created
cid:27 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]
cid:27 - <<- [SUB _REQS52ec455c263d99ba0800e300fd96c660.* _REQS1]
cid:27 - <<- [PUB $JS.API.STREAM.NAMES _REQS52ec455c263d99ba0800e300fd96c660.3 2]
cid:27 - <<- MSG_PAYLOAD: ["{}"]
cid:27 - ->> [MSG _REQS52ec455c263d99ba0800e300fd96c660.3 _REQS1 111]
cid:27 - <<- [PUB $JS.API.STREAM.NAMES _REQS52ec455c263d99ba0800e300fd96c660.5 2]
cid:27 - <<- MSG_PAYLOAD: ["{}"]
cid:27 - ->> [MSG _REQS52ec455c263d99ba0800e300fd96c660.5 _REQS1 111]
cid:27 - <<- [PUB $JS.API.STREAM.DELETE.purge _REQS52ec455c263d99ba0800e300fd96c660.7 2]
cid:27 - <<- MSG_PAYLOAD: ["{}"]
cid:27 - ->> [MSG _REQS52ec455c263d99ba0800e300fd96c660.7 _REQS1 73]
cid:21 - Client connection closed: Client Closed
cid:21 - <-> [DELSUB _REQS1]
cid:27 - Client connection closed: Client Closed
cid:27 - <-> [DELSUB _REQS1]


{
  "type" : "io.nats.jetstream.api.v1.consumer_create_response",
  "stream_name" : "ORDERS",
  "name" : "3B84DA83-901A-4348-8527-C2DBB533F690",
  "created" : "2025-04-19T08:23:24.417611931Z",
  "config" : {
    "name" : "3B84DA83-901A-4348-8527-C2DBB533F690",
    "deliver_policy" : "all",
    "ack_policy" : "explicit",
    "ack_wait" : 30000000000,
    "max_deliver" : 1,
    "replay_policy" : "instant",
    "max_waiting" : 1,
    "max_ack_pending" : 1,
    "inactive_threshold" : 5000000000,
    "num_replicas" : 0
  },
  "delivered" : {
    "consumer_seq" : 0,
    "stream_seq" : 0
  },
  "ack_floor" : {
    "consumer_seq" : 0,
    "stream_seq" : 0
  },
  "num_ack_pending" : 0,
  "num_redelivered" : 0,
  "num_waiting" : 0,
  "num_pending" : 0,
  "ts" : "2025-04-19T08:23:24.418712944Z"
}

NACK    
    subject = 'nacks'
    replyTo = '$JS.ACK.nacks.nacks.1.1.1.1745132251897321925.1'
    
    PUB $JS.ACK.nacks.nacks.1.1.1.1745132251897321925.1  24
    MSG_PAYLOAD: ["-NAK {\"delay\":500000000}"]
    
ACK
    replyTo = '$JS.ACK.nacks.nacks.1.2.2.1745132251897699158.0'
    
    PUB $JS.ACK.nacks.nacks.1.2.2.1745132251897699158.0  0
    MSG_PAYLOAD: [""]
    
         
    
ACK
    PUB $JS.ACK.nacks.nacks.1.2.2.1745131479715802498.0  0    

========================================================================

HMSG <subject> <sid> [reply-to] <#header bytes> <#total bytes>␍␊
[headers]␍␊␍␊
[payload]␍␊

HMSG FOO.BAR 34 45␍␊
NATS/1.0␍␊
FoodGroup: vegetable␍␊␍␊
Hello World␍␊

HMSG FOO.BAR 9 BAZ.69 34 45␍␊
NATS/1.0␍␊
FoodGroup: vegetable␍␊␍␊
Hello World␍␊

for .batch = 1:
 
HMSG 9FFCFC76-34F1-4F7A-B0A1-9C2D8F684705.3 1 81 81
NATS/1.0 408 Request Timeout  
Nats-Pending-Messages: 1
Nats-Pending-Bytes: 0




408 Request Timeout' instead of '404 No Messages' from $JS.API.CONSUMER.MSG.NEXT.<stream>.<consumer> [v2.10.14]
    https://github.com/nats-io/nats-server/issues/5373
    
    
2025/04/28 10:51:45.489745 [TRC] 172.18.0.1:39200 - cid:54 - <<- MSG_PAYLOAD: ["{\"expires\":3000000000,\"no_wait\":true}"]
2025/04/28 10:51:48.490425 [TRC] 172.18.0.1:39200 - cid:54 - ->> [HMSG FD97244F-27C6-4F68-B544-44A4EA789F39.3 1 81 81]

wrong subject
sid == 1
empty payload

headers:
    NATS/1.0 408 Request Timeout
    Nats-Pending-Messages: 0
    Nats-Pending-Bytes: 0


2025-04-29T08:25:36.013500766Z [1] 2025/04/29 08:25:36.012479 [DBG] 172.18.0.1:37836 - cid:12 - Client connection created
2025-04-29T08:25:36.016315410Z [1] 2025/04/29 08:25:36.016176 [TRC] 172.18.0.1:37836 - cid:12 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"lang":"Zig","version":"T.B.D","protocol":1,"echo":true, "no_responders":true, "headers":true}]
2025-04-29T08:25:36.016929238Z [1] 2025/04/29 08:25:36.016786 [TRC] 172.18.0.1:37836 - cid:12 - <<- [SUB 0047800B-1631-46CA-AB66-47FAE563A731.* 1 ]
2025-04-29T08:25:36.016979314Z [1] 2025/04/29 08:25:36.016821 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PUB $JS.API.CONSUMER.DURABLE.CREATE.ORDERS.DurableConsumer 0047800B-1631-46CA-AB66-47FAE563A731.2 315]
2025-04-29T08:25:36.016988324Z [1] 2025/04/29 08:25:36.016831 [TRC] 172.18.0.1:37836 - cid:12 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"ORDERS\",\"config\":{\"durable_name\":\"DurableConsumer\",\"deliver_policy\":\"all\",\"ack_policy\":\"explicit\",\"ack_wait\":30000000000,\"max_ack_pending\":1,\"max_waiting\":1,\"max_deliver\":1,\"filter_subject\":\"orders.*\",\"replay_policy\":\"instant\",\"headers_only\":false,\"num_replicas\":0,\"flow_control\":false},\"action\":\"\"}"]
2025-04-29T08:25:36.017706494Z [1] 2025/04/29 08:25:36.017589 [TRC] 172.18.0.1:37836 - cid:12 - ->> [MSG 0047800B-1631-46CA-AB66-47FAE563A731.2 1 590]
2025-04-29T08:25:38.181848328Z [1] 2025/04/29 08:25:38.181538 [DBG] 172.18.0.1:37836 - cid:12 - Client Ping Timer
2025-04-29T08:25:38.181915933Z [1] 2025/04/29 08:25:38.181624 [TRC] 172.18.0.1:37836 - cid:12 - ->> [PING]
2025-04-29T08:25:38.293872911Z [1] 2025/04/29 08:25:38.293726 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PING]
2025-04-29T08:25:38.293917329Z [1] 2025/04/29 08:25:38.293745 [TRC] 172.18.0.1:37836 - cid:12 - ->> [PONG]
2025-04-29T08:25:38.294038852Z [1] 2025/04/29 08:25:38.293945 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.ORDERS.DurableConsumer 0047800B-1631-46CA-AB66-47FAE563A731.3 47]
2025-04-29T08:25:38.294065112Z [1] 2025/04/29 08:25:38.293970 [TRC] 172.18.0.1:37836 - cid:12 - <<- MSG_PAYLOAD: ["{\"expires\":3000000000,\"batch\":1,\"no_wait\":true}"]
2025-04-29T08:25:38.294078591Z [1] 2025/04/29 08:25:38.294015 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PONG]
2025-04-29T08:25:39.333332086Z [1] 2025/04/29 08:25:39.333123 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PING]
2025-04-29T08:25:39.333402136Z [1] 2025/04/29 08:25:39.333158 [TRC] 172.18.0.1:37836 - cid:12 - ->> [PONG]
2025-04-29T08:25:40.357249435Z [1] 2025/04/29 08:25:40.357025 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PING]
2025-04-29T08:25:40.357306495Z [1] 2025/04/29 08:25:40.357063 [TRC] 172.18.0.1:37836 - cid:12 - ->> [PONG]
2025-04-29T08:25:41.295370609Z [1] 2025/04/29 08:25:41.295025 [TRC] 172.18.0.1:37836 - cid:12 - ->> [HMSG 0047800B-1631-46CA-AB66-47FAE563A731.3 1 81 81]
2025-04-29T08:26:10.573305097Z [1] 2025/04/29 08:26:10.573165 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PING]
2025-04-29T08:26:10.573346652Z [1] 2025/04/29 08:26:10.573187 [TRC] 172.18.0.1:37836 - cid:12 - ->> [PONG]
2025-04-29T08:26:17.012454905Z [1] 2025/04/29 08:26:17.012318 [TRC] 172.18.0.1:37836 - cid:12 - <<- [PING]
2025-04-29T08:26:17.012501768Z [1] 2025/04/29 08:26:17.012341 [TRC] 172.18.0.1:37836 - cid:12 - ->> [PONG]
2025-04-29T08:26:18.342608166Z [1] 2025/04/29 08:26:18.342465 [DBG] 172.18.0.1:37836 - cid:12 - Client connection closed: Client Closed
2025-04-29T08:26:18.342648255Z [1] 2025/04/29 08:26:18.342508 [TRC] 172.18.0.1:37836 - cid:12 - <-> [DELSUB 1]

==========================
2025-04-30T11:11:07.700220680Z [1] 2025/04/30 11:11:07.699414 [DBG] 172.18.0.1:60616 - cid:386 - Client connection created
2025-04-30T11:11:07.701029573Z [1] 2025/04/30 11:11:07.700864 [TRC] 172.18.0.1:60616 - cid:386 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]
2025-04-30T11:11:07.701063865Z [1] 2025/04/30 11:11:07.700955 [TRC] 172.18.0.1:60616 - cid:386 - <<- [SUB _REQSb4da39b3b1258139bbeaeb4bb791ac63.* _REQS1]
2025-04-30T11:11:07.701189089Z [1] 2025/04/30 11:11:07.701126 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB $JS.API.STREAM.CREATE.nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.2 206]
2025-04-30T11:11:07.701209343Z [1] 2025/04/30 11:11:07.701139 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"nacks\",\"num_replicas\":1,\"retention\":\"interest\",\"storage\":\"file\",\"subjects\":[\"nacks\"]}"]
2025-04-30T11:11:07.702655880Z [1] 2025/04/30 11:11:07.702555 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.2 _REQS1 721]
2025-04-30T11:11:07.704742087Z [1] 2025/04/30 11:11:07.704648 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB $JS.API.CONSUMER.NAMES.nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.3 2]
2025-04-30T11:11:07.704781617Z [1] 2025/04/30 11:11:07.704671 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["{}"]
2025-04-30T11:11:07.704856975Z [1] 2025/04/30 11:11:07.704814 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.3 _REQS1 108]
2025-04-30T11:11:07.705258209Z [1] 2025/04/30 11:11:07.705196 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB $JS.API.CONSUMER.DURABLE.CREATE.nacks.nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.4 155]
2025-04-30T11:11:07.705282164Z [1] 2025/04/30 11:11:07.705210 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"nacks\",\"config\":{\"ack_policy\":\"explicit\",\"deliver_policy\":\"all\",\"durable_name\":\"nacks\",\"replay_policy\":\"instant\",\"filter_subject\":\"nacks\"}}"]
2025-04-30T11:11:07.705807086Z [1] 2025/04/30 11:11:07.705749 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.nacks.nacks  87]
2025-04-30T11:11:07.705926793Z [1] 2025/04/30 11:11:07.705845 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.4 _REQS1 572]
2025-04-30T11:11:07.706297017Z [1] 2025/04/30 11:11:07.706235 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.5 5]
2025-04-30T11:11:07.706322300Z [1] 2025/04/30 11:11:07.706249 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["first"]
2025-04-30T11:11:07.706475111Z [1] 2025/04/30 11:11:07.706385 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.5 _REQS1 27]
2025-04-30T11:11:07.706781082Z [1] 2025/04/30 11:11:07.706720 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.6 6]
2025-04-30T11:11:07.706807691Z [1] 2025/04/30 11:11:07.706735 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["second"]
2025-04-30T11:11:07.706888357Z [1] 2025/04/30 11:11:07.706831 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.6 _REQS1 27]
2025-04-30T11:11:07.707209344Z [1] 2025/04/30 11:11:07.707153 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.7 2]
2025-04-30T11:11:07.707234766Z [1] 2025/04/30 11:11:07.707166 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["{}"]
2025-04-30T11:11:07.707437863Z [1] 2025/04/30 11:11:07.707380 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.7 _REQS1 570]
2025-04-30T11:11:07.708772097Z [1] 2025/04/30 11:11:07.708666 [TRC] 172.18.0.1:60616 - cid:386 - <<- [SUB handler.9f6cc4e5 d55be22a]
2025-04-30T11:11:07.749258734Z [1] 2025/04/30 11:11:07.749128 [TRC] 172.18.0.1:60616 - cid:386 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.nacks.nacks handler.9f6cc4e5 32]
2025-04-30T11:11:07.749318797Z [1] 2025/04/30 11:11:07.749147 [TRC] 172.18.0.1:60616 - cid:386 - <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":5000000000}"]
2025-04-30T11:11:07.749470072Z [1] 2025/04/30 11:11:07.749420 [TRC] 172.18.0.1:60616 - cid:386 - ->> [MSG nacks d55be22a $JS.ACK.nacks.nacks.1.1.1.1746011467706290801.1 5]
2025-04-30T11:11:09.971833452Z [1] 2025/04/30 11:11:09.971725 [DBG] 172.18.0.1:60616 - cid:386 - Client Ping Timer
2025-04-30T11:11:09.971884995Z [1] 2025/04/30 11:11:09.971753 [TRC] 172.18.0.1:60616 - cid:386 - ->> [PING]


<<- [PUB nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.5 5]
<<- MSG_PAYLOAD: ["first"]
->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.6 _REQS1 27]
<<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQSb4da39b3b1258139bbeaeb4bb791ac63.7 2]
<<- MSG_PAYLOAD: ["{}"]
->> [MSG _REQSb4da39b3b1258139bbeaeb4bb791ac63.7 _REQS1 570]
<<- [SUB handler.9f6cc4e5 d55be22a]
<<- [PUB $JS.API.CONSUMER.MSG.NEXT.nacks.nacks handler.9f6cc4e5 32]
<<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":5000000000}"]
->> [MSG nacks d55be22a $JS.ACK.nacks.nacks.1.1.1.1746011467706290801.1 5]

========================================
2025-04-30T12:13:18.018373461Z [1] 2025/04/30 12:13:18.017359 [DBG] 172.18.0.1:38338 - cid:394 - Client connection created
 <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]
 <<- [SUB _REQS8d26a53e564b8ee0e33dc17d860aab97.* _REQS1]
 
 <<- [PUB $JS.API.STREAM.CREATE.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.2 206]
 <<- MSG_PAYLOAD: ["{\"allow_rollup_hdrs\":true,\"deny_delete\":true,\"discard\":\"old\",\"duplicate_window\":0,\"max_age\":0,\"max_consumers\":-1,\"name\":\"nacks\",\"num_replicas\":1,\"retention\":\"interest\",\"storage\":\"file\",\"subjects\":[\"nacks\"]}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.2 _REQS1 722]
 
 <<- [PUB $JS.API.CONSUMER.NAMES.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.3 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.3 _REQS1 108]
 
 <<- [PUB $JS.API.CONSUMER.DURABLE.CREATE.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.4 155]
 <<- MSG_PAYLOAD: ["{\"stream_name\":\"nacks\",\"config\":{\"ack_policy\":\"explicit\",\"deliver_policy\":\"all\",\"durable_name\":\"nacks\",\"replay_policy\":\"instant\",\"filter_subject\":\"nacks\"}}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.4 _REQS1 572]

 <<- [PUB nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.5 5]
 <<- MSG_PAYLOAD: ["first"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.5 _REQS1 27]
 
 <<- [PUB nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.6 6]
 <<- MSG_PAYLOAD: ["second"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.6 _REQS1 27]
 
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.7 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.7 _REQS1 569]
 
 <<- [SUB handler.084d2d18 bc3c401d]
 
 <<- [PUB $JS.API.CONSUMER.MSG.NEXT.nacks.nacks handler.084d2d18 32]
 <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":5000000000}"]
 ->> [MSG nacks bc3c401d $JS.ACK.nacks.nacks.1.1.1.1746015198024891404.1 5]
 
 <<- [PUB $JS.ACK.nacks.nacks.1.1.1.1746015198024891404.1  24]
 <<- MSG_PAYLOAD: ["-NAK {\"delay\":500000000}"]
 
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.8 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.8 _REQS1 617]
 
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.9 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.9 _REQS1 617]
 
 <<- [PUB $JS.API.CONSUMER.MSG.NEXT.nacks.nacks handler.084d2d18 32]
 <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":5000000000}"]
 ->> [MSG nacks bc3c401d $JS.ACK.nacks.nacks.1.2.2.1746015198025427989.0 6]
 
 <<- [PUB $JS.ACK.nacks.nacks.1.2.2.1746015198025427989.0  4]
 <<- MSG_PAYLOAD: ["+WPI"]
 
 <<- [PUB $JS.ACK.nacks.nacks.1.2.2.1746015198025427989.0  0]
 <<- MSG_PAYLOAD: [""]
 
 <<- [PUB $JS.API.CONSUMER.MSG.NEXT.nacks.nacks handler.084d2d18 32]
 <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":5000000000}"]
 
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.10 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.10 _REQS1 664]
 
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.11 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.11 _REQS1 663]
 
 ->> [MSG nacks bc3c401d $JS.ACK.nacks.nacks.2.1.3.1746015198024891404.0 5]
 
 <<- [PUB $JS.API.CONSUMER.MSG.NEXT.nacks.nacks handler.084d2d18 32]
 <<- MSG_PAYLOAD: ["{\"batch\":1,\"expires\":5000000000}"]
 
 <<- [PUB $JS.ACK.nacks.nacks.2.1.3.1746015198024891404.0  0]
 <<- MSG_PAYLOAD: [""]
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.12 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.12 _REQS1 663]
 <<- [PUB $JS.API.CONSUMER.INFO.nacks.nacks _REQS8d26a53e564b8ee0e33dc17d860aab97.13 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS8d26a53e564b8ee0e33dc17d860aab97.13 _REQS1 664]
2025-04-30T12:13:19.119082391Z [1] 2025/04/30 12:13:19.118976 [DBG] 172.18.0.1:38344 - cid:400 - Client connection created
2025-04-30T12:13:19.119533282Z [1] 2025/04/30 12:13:19.119434 [TRC] 172.18.0.1:38344 - cid:400 - <<- [CONNECT {"headers":true,"pedantic":false,"verbose":false,"lang":"php","version":"dev"}]
 <<- [SUB _REQS6b7c24f151f71ee140244e052d5307be.* _REQS1]
 <<- [PUB $JS.API.STREAM.NAMES _REQS6b7c24f151f71ee140244e052d5307be.2 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS6b7c24f151f71ee140244e052d5307be.2 _REQS1 111]
 <<- [PUB $JS.API.STREAM.NAMES _REQS6b7c24f151f71ee140244e052d5307be.3 2]
 <<- MSG_PAYLOAD: ["{}"]
 ->> [MSG _REQS6b7c24f151f71ee140244e052d5307be.3 _REQS1 111]
 <<- [PUB $JS.API.STREAM.DELETE.nacks _REQS6b7c24f151f71ee140244e052d5307be.4 2]
 <<- MSG_PAYLOAD: ["{}"]
2025-04-30T12:13:19.120919967Z [1] 2025/04/30 12:13:19.120881 [TRC] JETSTREAM - <-> [DELSUB 1]
2025-04-30T12:13:19.120958519Z [1] 2025/04/30 12:13:19.120898 [TRC] JETSTREAM - <-> [DELSUB 2]
2025-04-30T12:13:19.120982474Z [1] 2025/04/30 12:13:19.120907 [TRC] JETSTREAM - <-> [DELSUB 88]
2025-04-30T12:13:19.120997630Z [1] 2025/04/30 12:13:19.120925 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-04-30T12:13:19.121007198Z [1] 2025/04/30 12:13:19.120949 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-04-30T12:13:19.121017744Z [1] 2025/04/30 12:13:19.120968 [TRC] 172.18.0.1:38338 - cid:394 - ->> [HMSG handler.084d2d18 bc3c401d 33 33]
2025-04-30T12:13:19.121535263Z [1] 2025/04/30 12:13:19.121416 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-04-30T12:13:19.121556354Z [1] 2025/04/30 12:13:19.121430 [TRC] JETSTREAM - <-> [DELSUB 1]
2025-04-30T12:13:19.121564386Z [1] 2025/04/30 12:13:19.121439 [DBG] JETSTREAM - JetStream connection closed: Client Closed
2025-04-30T12:13:19.121575281Z [1] 2025/04/30 12:13:19.121464 [DBG] JETSTREAM - JetStream connection closed: Client Closed
 ->> [MSG _REQS6b7c24f151f71ee140244e052d5307be.4 _REQS1 73]
 Client connection closed: Client Closed
 <-> [DELSUB _REQS1]
 Client connection closed: Client Closed
 <-> [DELSUB _REQS1]
 <-> [DELSUB bc3c401d]

====================================================== Go
Client connection created
<<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]

<<- [SUB _INBOX.UHnm7V7kIue61FBnWdN5Xo.*  1]

<<- [PUB $JS.API.STREAM.CREATE.FOO _INBOX.UHnm7V7kIue61FBnWdN5Xo.MqC7jawN 271]
<<- MSG_PAYLOAD: ["{\"name\":\"FOO\",\"subjects\":[\"foo\"],\"retention\":\"limits\",\"max_consumers\":0,\"max_msgs\":0,\"max_bytes\":0,\"discard\":\"old\",\"max_age\":0,\"max_msgs_per_subject\":0,\"storage\":\"file\",\"num_replicas\":0,\"compression\":\"none\",\"allow_direct\":false,\"mirror_direct\":false,\"consumer_limits\":{}}"]
->> [MSG _INBOX.UHnm7V7kIue61FBnWdN5Xo.MqC7jawN 1 718]

<<- [PUB foo _INBOX.UHnm7V7kIue61FBnWdN5Xo.SSby7mo1 9]
<<- MSG_PAYLOAD: ["Hello JS!"]
->> [MSG _INBOX.UHnm7V7kIue61FBnWdN5Xo.SSby7mo1 1 25]

<<- [PUB $JS.API.STREAM.NAMES _INBOX.UHnm7V7kIue61FBnWdN5Xo.ueDDlYaS 17]
<<- MSG_PAYLOAD: ["{\"subject\":\"foo\"}"]
->> [MSG _INBOX.UHnm7V7kIue61FBnWdN5Xo.ueDDlYaS 1 109]

<<- [PUB $JS.API.CONSUMER.INFO.FOO.wq _INBOX.UHnm7V7kIue61FBnWdN5Xo.VNPVgkuh 0]
<<- MSG_PAYLOAD: [""]
->> [MSG _INBOX.UHnm7V7kIue61FBnWdN5Xo.VNPVgkuh 1 131]

=== sub, _ := js.PullSubscribe("foo", "wq") ===

<<- [SUB _INBOX.UHnm7V7kIue61FBnWdN5cJ.*  2]

<<- [PUB $JS.API.CONSUMER.CREATE.FOO.wq.foo _INBOX.UHnm7V7kIue61FBnWdN5Xo.hTzJyO5S 189]
<<- MSG_PAYLOAD: ["{\"stream_name\":\"FOO\",\"config\":{\"durable_name\":\"wq\",\"deliver_policy\":\"all\",\"ack_policy\":\"explicit\",\"filter_subject\":\"foo\",\"replay_policy\":\"instant\",\"max_ack_pending\":65536,\"num_replicas\":0}}"]
->> [MSG _INBOX.UHnm7V7kIue61FBnWdN5Xo.hTzJyO5S 1 574]

=== msgs, _ := sub.Fetch(1, nats.MaxWait(2*time.Second)) ===

<<- [PUB $JS.API.CONSUMER.MSG.NEXT.FOO.wq _INBOX.UHnm7V7kIue61FBnWdN5cJ.UHnm7V7kIue61FBnWdN5go 32]
<<- MSG_PAYLOAD: ["{\"expires\":1799987079,\"batch\":1}"]
->> [MSG foo 2 $JS.ACK.FOO.wq.1.1.1.1746074662381983509.0 9]

=== msg.Ack() === 

<<- [PUB $JS.ACK.FOO.wq.1.1.1.1746074662381983509.0 4]
<<- MSG_PAYLOAD: ["+ACK"]

Client connection closed: Client Closed

<-> [DELSUB 1]

<-> [DELSUB 2]

	
<<- [SUB _INBOX.ctpNH1Dcg1osRfebzm0qLn.*  2]
<<- [PUB $JS.API.CONSUMER.MSG.NEXT.FOO.wq _INBOX.ctpNH1Dcg1osRfebzm0qLn.ctpNH1Dcg1osRfebzm0qNg 32]
<<- MSG_PAYLOAD: ["{\"expires\":1799994969,\"batch\":1}"]

->> [MSG foo 2 $JS.ACK.FOO.wq.1.3.3.1746076488180853371.0 9]

<<- [PUB $JS.ACK.FOO.wq.1.3.3.1746076488180853371.0 4]
<<- MSG_PAYLOAD: ["+ACK"]

	// Try to pull one message,
	msgs, _ = sub.Fetch(1, nats.MaxWait(2*time.Second)) - fetch result - NoMessages


<<- [PUB $JS.API.CONSUMER.MSG.NEXT.FOO.wq _INBOX.ctpNH1Dcg1osRfebzm0qLn.ctpNH1Dcg1osRfebzm0qPZ 32]
<<- MSG_PAYLOAD: ["{\"expires\":1799981200,\"batch\":1}"]
->> [HMSG _INBOX.ctpNH1Dcg1osRfebzm0qLn.ctpNH1Dcg1osRfebzm0qPZ 2 81 81]

==================== Go
06:06:25.561632 [DBG] 172.18.0.1:37422 - cid:39 - Client connection created
06:06:25.561974 [TRC] 172.18.0.1:37422 - cid:39 - <<- [CONNECT {"verbose":false,"pedantic":false,"tls_required":false,"name":"","lang":"go","version":"1.39.0","protocol":1,"echo":true,"headers":true,"no_responders":true}]
06:06:25.562063 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PING]
06:06:25.562068 [TRC] 172.18.0.1:37422 - cid:39 - ->> [PONG]

06:06:25.562540 [TRC] 172.18.0.1:37422 - cid:39 - <<- [SUB _INBOX.BsswrxeiTisANY4cWDApMx.*  1]
06:06:25.562564 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.STREAM.NAMES _INBOX.BsswrxeiTisANY4cWDApMx.MAllUW0r 17]
06:06:25.562571 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: ["{\"subject\":\"foo\"}"]
06:06:25.562741 [TRC] 172.18.0.1:37422 - cid:39 - ->> [MSG _INBOX.BsswrxeiTisANY4cWDApMx.MAllUW0r 1 109]
06:06:25.563168 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.CONSUMER.INFO.FOO.wq _INBOX.BsswrxeiTisANY4cWDApMx.wWOpcQGi 0]
06:06:25.563180 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: [""]
06:06:25.563276 [TRC] 172.18.0.1:37422 - cid:39 - ->> [MSG _INBOX.BsswrxeiTisANY4cWDApMx.wWOpcQGi 1 131]

06:06:25.563952 [TRC] 172.18.0.1:37422 - cid:39 - <<- [SUB _INBOX.BsswrxeiTisANY4cWDApOr.*  2]
06:06:25.564050 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.CONSUMER.CREATE.FOO.wq.foo _INBOX.BsswrxeiTisANY4cWDApMx.iTfKgBMx 189]
06:06:25.564084 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: ["{\"stream_name\":\"FOO\",\"config\":{\"durable_name\":\"wq\",\"deliver_policy\":\"all\",\"ack_policy\":\"explicit\",\"filter_subject\":\"foo\",\"replay_policy\":\"instant\",\"max_ack_pending\":65536,\"num_replicas\":0}}"]
06:06:25.564740 [TRC] JETSTREAM - <<- [SUB $JSC.CI.$G.FOO.wq  59]
06:06:25.564822 [TRC] 172.18.0.1:37422 - cid:39 - ->> [MSG _INBOX.BsswrxeiTisANY4cWDApMx.iTfKgBMx 1 575]

06:06:25.565363 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.FOO.wq _INBOX.BsswrxeiTisANY4cWDApOr.BsswrxeiTisANY4cWDApQl 32]
06:06:25.565385 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: ["{\"expires\":1799993527,\"batch\":1}"]
06:06:25.565540 [TRC] 172.18.0.1:37422 - cid:39 - ->> [MSG foo 2 $JS.ACK.FOO.wq.1.1.1.1746425169265699842.0 9]
06:06:27.734197 [DBG] 172.18.0.1:37422 - cid:39 - Client Ping Timer
06:06:27.734245 [TRC] 172.18.0.1:37422 - cid:39 - ->> [PING]

06:06:28.600395 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.ACK.FOO.wq.1.1.1.1746425169265699842.0 4]
06:06:28.600564 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: ["+ACK"]

06:06:28.600727 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PONG]

06:06:28.600739 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.FOO.wq _INBOX.BsswrxeiTisANY4cWDApOr.BsswrxeiTisANY4cWDApSf 32]
06:06:28.600744 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: ["{\"expires\":5399932068,\"batch\":1}"]
06:06:34.001833 [TRC] 172.18.0.1:37422 - cid:39 - ->> [HMSG _INBOX.BsswrxeiTisANY4cWDApOr.BsswrxeiTisANY4cWDApSf 2 81 81]

06:06:34.601732 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.CONSUMER.MSG.NEXT.FOO.wq _INBOX.BsswrxeiTisANY4cWDApOr.BsswrxeiTisANY4cWDApUZ 32]
06:06:34.601759 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: ["{\"expires\":5399915937,\"batch\":1}"]
06:06:40.002353 [TRC] 172.18.0.1:37422 - cid:39 - ->> [HMSG _INBOX.BsswrxeiTisANY4cWDApOr.BsswrxeiTisANY4cWDApUZ 2 81 81]

06:07:01.180224 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.CONSUMER.DELETE.FOO.wq _INBOX.BsswrxeiTisANY4cWDApMx.DKAmckbg 0]
06:07:01.180243 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: [""]
06:07:01.180351 [TRC] JETSTREAM - <-> [DELSUB 1]
06:07:01.180367 [TRC] JETSTREAM - <-> [DELSUB 2]
06:07:01.180376 [TRC] JETSTREAM - <-> [DELSUB 59]
06:07:01.180391 [DBG] JETSTREAM - JetStream connection closed: Client Closed
06:07:01.180399 [DBG] JETSTREAM - JetStream connection closed: Client Closed
06:07:01.180775 [TRC] 172.18.0.1:37422 - cid:39 - ->> [MSG _INBOX.BsswrxeiTisANY4cWDApMx.DKAmckbg 1 75]
06:07:08.216982 [TRC] 172.18.0.1:37422 - cid:39 - <<- [PUB $JS.API.STREAM.DELETE.FOO _INBOX.BsswrxeiTisANY4cWDApMx.Y5BErhEt 0]
06:07:08.217011 [TRC] 172.18.0.1:37422 - cid:39 - <<- MSG_PAYLOAD: [""]
06:07:08.217147 [DBG] JETSTREAM - JetStream connection closed: Client Closed
06:07:08.217159 [TRC] JETSTREAM - <-> [DELSUB 1]
06:07:08.217168 [DBG] JETSTREAM - JetStream connection closed: Client Closed
06:07:08.217175 [DBG] JETSTREAM - JetStream connection closed: Client Closed
06:07:08.217516 [TRC] 172.18.0.1:37422 - cid:39 - ->> [MSG _INBOX.BsswrxeiTisANY4cWDApMx.Y5BErhEt 1 73]
06:07:08.670487 [DBG] 172.18.0.1:37422 - cid:39 - Client connection closed: Client Closed
06:07:08.670488 [DBG] 172.18.0.1:39594 - cid:35 - Client connection closed: Client Closed
06:07:08.670524 [TRC] 172.18.0.1:37422 - cid:39 - <-> [DELSUB 1]
06:07:08.670537 [TRC] 172.18.0.1:37422 - cid:39 - <-> [DELSUB 2]
06:07:08.670528 [TRC] 172.18.0.1:39594 - cid:35 - <-> [DELSUB 1]


MSG NOTIFY NSID 0